---
layout: slides
title: "Devenir efficace avec Git"
permalink: /git-fr
plugins:
  - notes
slideNumber: c/t
---
<style type="text/css">
	.reveal small {
		vertical-align: initial;
	}

	/* SVG styling. */

	svg {
		color: var(--r-main-color);
	}
	text {
		font: 14px monospace;
		dominant-baseline: middle;
		fill: currentColor;
	}
	line, polyline, polygon {
		stroke: currentColor;
		fill: currentColor;
	}
	path {
		stroke: currentColor;
		fill: none;
	}
	use[href="#arrow-head"] + * {
		stroke-dasharray: 0 6 9999;
	}
	.centered {
		text-anchor: middle;
	}
	.right {
		text-anchor: end;
	}

	.commit {
		rx: 45px;
		ry: 30px;
		stroke: currentColor;
		fill: var(--r-background-color);
	}
	.commit-id {
		text-anchor: middle;
		fill: #ddaf3c !important;
		color: #ddaf3c !important;
	}
	.branch {
		fill: #4ebf22 !important;
		color: #4ebf22 !important;
		font-weight: bold;
	}
	.tag {
		fill: #ddaf3c !important;
		color: #ddaf3c !important;
		font-weight: bold;
	}
	.head {
		fill: #54e1b9 !important;
		color: #54e1b9 !important;
		font-weight: bold;
	}
	.remote-ref {
		fill: #dd3c69 !important;
		color: #dd3c69 !important;
	}

	/* Terminal styling. */

	.prompt { color: #4ebf22; }
	.cwd { color: #54e1b9; }
	.error { color: #dd3c69; }
	.warning { color: #ddaf3c; }
</style>
<svg style="display: none;">
	<defs>
		<polygon id="arrow-head" points="0,0 8,-4 8,4"/>
	</defs>
</svg>

<section>
	<h1>Devenir efficace avec Git</h1>
	<p>â„¹ï¸ These slides are also <a href="/slides/git">available in English</a>!</p>
	<p>ğŸ‘©â€ğŸ’» <a href="/slides/git-fr?shownotes">Version autonome</a> (pour lecture en solo)</p>

	<aside class="notes">
		<p>DurÃ©e estimÃ©e&nbsp;: une heure. <a href="https://revealjs.com">Manuel d'utilisation de reveal.js</a></p>
		<hr/>
		<p>Bonjour et bienvenue dans cette prÃ©sentation sur les bases de Git.</p>
		<p>Cette prÃ©sentation ne parlera pas (peu) d'une utilisation pratique de Git, mais vise plutÃ´t Ã  introduire les concepts et la thÃ©orie qui sous-tendent Git.</p>
		<p>Comprendre ces concepts rend Git bien plus simple et intuitif Ã  utiliser... et ainsi vous deviendrez plus efficace&nbsp;!</p>
</section>

<section>
	<h2>Git, kÃ©zako&nbsp;?</h2>

	<section>
		<p class="fragment">Un systÃ¨me de contrÃ´le de version (<abbr>VCS</abbr>) distribuÃ©</p>
	</section>

	<section>
		<h3>SystÃ¨me de contrÃ´le de version</h3>
		<p class="fragment">= systÃ¨me permettant de gÃ©rer diffÃ©rentes versions d'un ensemble de fichiers</p>
		<p class="fragment">(Beaucoup de versions intermÃ©diaires entre deux releases&nbsp;!)</p>
		<p class="fragment">Souvent utilisÃ© pour travailler Ã  plusieurs sur un projet... entre autres&nbsp;!</p>

		<aside class="notes">
			<p>Un systÃ¨me de contrÃ´le de version permet de gÃ©rer diffÃ©rentes versions d'un ensemble de fichiers.</p>
			<p>L'intÃ©rÃªt existe car, entre deux versions publiÃ©es, il y a beaucoup de versions intermÃ©diaires&nbsp;!</p>
			<p>Si deux personnes travaillent en parallÃ¨le sur un projet, chacune de leurs copies (modifiÃ©es) constitue une version diffÃ©rente&nbsp;; un VCS permet donc de travailler bien plus facilement Ã  plusieurs&nbsp;!</p>
		</aside>
	</section>

	<section>
		<h3>Autres VCS</h3>

		<ul>
			<li class="fragment">Subversion (SVN)</li>
			<li class="fragment">Perforce (p4)</li>
			<li class="fragment">CVS</li>
			<li class="fragment">Mercurial</li>
			<li class="fragment">Bazaar</li>
		</ul>

		<aside class="notes">
			<p>Ceci dit, Git n'est ni le premier (ni le dernier) VCS, Â«seulementÂ» le plus populaire Ã  l'heure actuelle.</p>
			<p>En voici quelques autres.</p>
		</aside>
	</section>

	<section>
		<h3>Ce que Git n'est pas</h3>

		<p class="fragment">Git â‰  GitHub, GitLab, Gitea, etc.</p>
		<p class="fragment">Git = outil logiciel (en ligne de commande)</p>
		<p class="fragment">GitHub et GitLab = services d'hÃ©bergement de dÃ©pÃ´ts Git</p>
		<p class="fragment">Linux â‰  OVH, par exemple</p>

		<aside class="notes">
			<p>Puisque Git est souvent utilisÃ© en tandem avec GitHub, GitLab, etc., beaucoup de gens confondent les deux&nbsp;!</p>
			<p>GitHub, GitLab, etc. fournissent des fonctionnalitÃ©s complÃ©mentaires Ã  Git, mais pour autant, dire Â«j'utilise GitHub sur mon ordiÂ» n'a pas de sens.</p>
			<p>La diffÃ©rence entre Git et Git{Hub,Lab,tea} est Ã©quivalente Ã  la diffÃ©rence entre Linux et OVH, par exemple.</p>
		</aside>
	</section>
</section>

<section>
	<h2>Pourquoi utiliser Git&nbsp;?</h2>
	<p class="fragment">BÃ©nÃ©fices sur plusieurs niveaux&nbsp;:</p>
	<ol>
		<li class="fragment">SystÃ¨me de backup</li>
		<li class="fragment">Travail par Â«branchesÂ»</li>
		<li class="fragment">Travail collaboratif</li>
	</ol>
	<p class="fragment"><strong>Ã‡a vaut le coup&nbsp;!</strong></p>

	<aside class="notes">
		<p>Surtout au dÃ©but, l'intÃ©rÃªt de Git n'est pas forcÃ©ment Ã©vident, surtout pour des petits projets solo.</p>
		<p>Pourtant, les fonctionnalitÃ©s de Git sont (Ã  mon avis) simples Ã  utiliser, et utiles pour tout le monde&nbsp;!</p>
	</aside>
</section>

<section>
	<h2>Faire des backups avec Git</h2>

	<section>
		<p>CommenÃ§ons avec une parenthÃ¨se sur le mot Â«distribuÃ©Â»</p>
		<p class="fragment">Vous avez peut-Ãªtre entendu dire que Git Ã©tait un systÃ¨me de contrÃ´le de version <strong>distribuÃ©</strong>.</p>
		<p class="fragment">Qu'est-ce Ã  dire&nbsp;?</p>
	</section>
	<section>
		<h3>Deux types de VCS</h3>
		<dl>
			<dt class="fragment">CentralisÃ©</dt>
			<dd class="fragment">Toute action sur le repo requiert un accÃ¨s au serveur <small class="fragment">(Subversion, Perforce, etc.)</small></dd>
			<dt class="fragment">DistribuÃ©</dt>
			<dd class="fragment">Aucune copie du repo n'est distincte <small class="fragment">(Mercurial, <strong>Git</strong>, etc.)</small></dd>
	</section>
	<section>
		<h3>IntÃ©rÃªts d'un systÃ¨me distribuÃ©</h3>
		<ul>
			<li class="fragment">Chaque dÃ©veloppeur possÃ¨de une copie complÃ¨te<sup aria-describedby="footnote-distributed">1</sup> du repo, pas juste le serveur.<br/><strong class="fragment">â” Chouette, des backups pas chers&nbsp;!</strong></li>
			<li class="fragment">Les dÃ©veloppeurs peuvent travailler mÃªme hors ligne&nbsp;!<br/><em class="fragment">(On reviendra plus tard Ã  la rÃ©solution de conflits)</em></li>
		</ul>
		<small class="fragment" id="footnote-distributed"><sup>1</sup> Pour plus de dÃ©tails, voir <a href="https://www.youtube.com/watch?v=4XpnKHJAok8">cette prÃ©sentation de Linus Torvalds Ã  Google</a>.</small>
	</section>
</section>

<section>
	<h2>Concepts de base</h2>

	<section>
		<h3 class="fragment">Parlons peu mais parlons graphes</h3>
		<p class="fragment">â—ï¸ <strong>Promis, rien de compliquÃ©&nbsp;!</strong> <small>(il y aura plein d'images)</small></p>
		<p class="fragment">Git est basÃ© sur un <strong>graphe</strong>.</p>

		<aside class="notes">
			<p>Bien, il est temps de rentrer dans le vif du sujet.</p>
			<p>Le choix de Git pour la reprÃ©sentation des diffÃ©rentes versions, est un <strong>graphe</strong>.</p>
			<p>Cette prÃ©sentation essaye de rendre les diffÃ©rentes opÃ©rations plus claires, via des visualisations animÃ©es&nbsp;!</p>
			<p><small>Note&nbsp;: je doute de l'accessibilitÃ© des diagrammes, malheureusement, mais je ne sais pas non plus comment les transcrire. Si vous Ãªtre un utilisateur de technologies assistives, <a href="https://eldred.fr/about#contact">contactez-moi</a>&nbsp;!</small></p>
		</aside>
	</section>

	<section>
		<h3>Qu'est-ce qu'un <strong>commit</strong>&nbsp;?</h3>

		<ul>
			<li class="fragment" data-fragment-index="0">Un message de commit</li>
			<li class="fragment" data-fragment-index="1">Un auteur (nom + adresse mail)</li>
			<li class="fragment" data-fragment-index="2">(Quelques autres mÃ©tadonnÃ©es...)</li>
			<li class="fragment" data-fragment-index="3"><span class="fragment highlight-blue" data-fragment-index="5">Un ensemble de fichiers et leurs contenus</span></li>
			<li class="fragment" data-fragment-index="4"><span class="fragment highlight-blue" data-fragment-index="6">Des Â«flÃ¨chesÂ» vers son/ses parent(s)</span></li>
		</ul>
		<p class="fragment">Un commit est identifiÃ© de maniÃ¨re <strong>unique</strong> par son <strong>hash</strong>.</p>

		<aside class="notes">
			<p>Un des termes qui revient trÃ¨s souvent, et qui est en fait essentiel, est le <strong>commit</strong>.</p>
			<p>Parmi tout ce qui compose un commit, ce qui nous intÃ©resse le plus est l'ensemble de fichiers qu'il contient, et ses relations de parentÃ©.</p>
			<p>Tout ceci est, au final, rÃ©sumÃ© Ã  un <strong>hash</strong>.</p>
		</aside>
	</section>

	<section>
		<h3>Un hash&nbsp;? Ã‡a se mange&nbsp;?</h3>

		<p class="fragment">Toutes les informations d'un commit, <strong>y compris le contenu des fichiers,</strong> sont passÃ©es Ã  une fonction de <strong>hachage</strong> pour obtenir son <strong>hash</strong>.</p>
		<p class="fragment">Principe d'une fonction de hachage&nbsp;: on lui passe des donnÃ©es <small>(une suite d'octets)</small>, elle retourne un nombre (Â«hashÂ»)&nbsp;; deux entrÃ©es identiques â‡” deux hashs identiques.</p>
		<small class="fragment">(Plus d'infos <a href="https://fr.wikipedia.org/wiki/Fonction_de_hachage">sur WikipÃ©dia</a> pour les curieux)</small>
	</section>

	<section>
		<h3>Les hashs de commits</h3>

		<p class="fragment">Le hash d'un commit est un trÃ¨s grand nombre, prÃ©sentÃ© en <a href="https://fr.wikipedia.org/wiki/HexadÃ©cimal">hexadÃ©cimal</a>&nbsp;: <span class="fragment commit-id">6828f7bf493cd4c9c332ea769e6e38fbbe258821</span>.</p>
		<p class="fragment">Les hashs sont souvent raccourcis (par dÃ©faut Ã  7 caractÃ¨res)&nbsp;: <span class="commit-id">6828f7b</span>, c'est ce qu'on utilisera dans ce cours.</p>
	</section>

	<section>
		<h3>Des Â«pointeursÂ»</h3>
		<p class="fragment" data-fragment-index="0">Il n'y a pas que les commits qui pointent sur des commits.</p>
		<svg viewBox="-5 -5 710 160" class="fragment" data-fragment-index="0">
			<ellipse cx="45" cy="75" class="commit"/><text x="45" y="75" class="commit-id">f37c942</text>
				<use x="90" y="75" href="#arrow-head"/><line x1="90" y1="75" x2="175" y2="75"/>
			<ellipse cx="220" cy="75" class="commit"/><text x="220" y="75" class="commit-id">984b311</text>
			<g class="fragment" data-fragment-index="3">
				<use x="220" y="105" href="#arrow-head" transform="rotate(90,220,105)"/><line x1="220" y1="105" x2="220" y2="130"/>
				<text x="220" y="140" class="tag centered">v1.7.10</text>
			</g>
				<use x="265" y="75" href="#arrow-head" transform="rotate(-33,265,75)"/><line x1="265" y1="75" x2="335" y2="30"/>
			<ellipse cx="380" cy="30" class="commit"/><text x="380" y="30" class="commit-id">c4fe9cc</text>
				<use x="425" y="30" href="#arrow-head"/><line x1="425" y1="30" x2="495" y2="30"/>
			<ellipse cx="540" cy="30" class="commit"/><text x="540" y="30" class="commit-id">700aced</text>
			<g class="fragment" data-fragment-index="2">
				<use x="585" y="30" href="#arrow-head"/><line x1="585" y1="30" x2="635" y2="30"/>
				<text x="640" y="30" class="branch">master</text>
			</g>
			<g class="fragment" data-fragment-index="4">
				<use x="540" y="60" href="#arrow-head" transform="rotate(90,540,60)"/><line x1="540" y1="60" x2="540" y2="80"/>
				<text x="540" y="90" class="head centered">HEAD</text>
			</g>
				<use x="265" y="75" href="#arrow-head" transform="rotate(33,265,75)"/><line x1="265" y1="75" x2="335" y2="120"/>
			<ellipse cx="380" cy="120" class="commit"/><text x="380" y="120" class="commit-id">150dab6</text>
			<g class="fragment" data-fragment-index="2">
				<use x="425" y="120" href="#arrow-head"/><line x1="425" y1="120" x2="475" y2="120"/>
				<text x="480" y="120" class="branch">network-fixes</text>
			</g>
		</svg>
		<p class="fragment" data-fragment-index="1">Il y a aussi
			<span class="fragment" data-fragment-index="2">des branches,</span>
			<span class="fragment" data-fragment-index="3">des tags,</span>
			<span class="fragment" data-fragment-index="4">et quelques autres choses.</span>
			<small class="fragment" data-fragment-index="5">(On parlera de leurs diffÃ©rences plus tard)</small>
		</p>
	</section>
</section>

<section>
	<h2>Manipuler le graphe</h2>
	<section>
	</section>

	<section>
		<h3>CrÃ©er un commit</h3>
		<svg viewBox="-5 -5 435 70" style="max-height: 13vh;">
			<ellipse cx="45" cy="30" class="commit"/><text x="45" y="30" class="commit-id">f37c942</text>
				<use x="90" y="30" href="#arrow-head"/><line x1="90" y1="30" x2="175" y2="30"/>
			<ellipse cx="220" cy="30" class="commit"/><text x="220" y="30" class="commit-id">984b311</text>
			<g class="fragment" data-fragment-index="1">
				<use x="265" y="30" href="#arrow-head"/><line x1="265" y1="30" x2="335" y2="30"/>
				<ellipse cx="380" cy="30" class="commit"/><text x="380" y="30" class="commit-id">c4fe9cc</text>
			</g>
		</svg>
		<p class="fragment" data-fragment-index="0">Pour crÃ©er un commit...</p>
		<p class="fragment" data-fragment-index="1">... on l'ajoute simplement au graphe.</p>
	</section>

	<section>
		<h3>C'est tout&nbsp;!</h3>
		<p class="fragment">Il n'y a pas de piÃ¨ge, on ne fait jamais qu'ajouter des commits au graphe.</p>
		<p class="fragment">Parlons tout de mÃªme de ce qui se passe quand on le fait.</p>
	</section>

	<section>
		<h3><code>HEAD</code></h3>
		<p class="fragment"><code class="head">HEAD</code> dÃ©signe le commit qui est actuellement <em>checked out</em>.</p>
		<p class="fragment">C'est-Ã -dire, il s'agit du commit dont le contenu (les fichiers) est actuellement prÃ©sent dans le rÃ©pertoire.</p>
		<p class="fragment">On peut considÃ©rer le commit pointÃ© par <code class="head">HEAD</code> comme Â«lÃ  oÃ¹ on se trouve actuellementÂ».</p>
	</section>

	<section>
		<h3 class="head"><code>HEAD</code></h3>
		<p class="fragment" data-fragment-index="0">Et quand on crÃ©e un nouveau commit&nbsp;?</p>
		<svg viewBox="-5 -5 435 105" style="max-height: 13vh;">
			<ellipse cx="45" cy="30" class="commit"/><text x="45" y="30" class="commit-id">f37c942</text>
				<use x="90" y="30" href="#arrow-head"/><line x1="90" y1="30" x2="175" y2="30"/>
			<ellipse cx="220" cy="30" class="commit"/><text x="220" y="30" class="commit-id">984b311</text>
			<g class="fragment fade-out" data-fragment-index="1">
				<use x="220" y="60" href="#arrow-head" transform="rotate(90,220,60)"/><line x1="220" y1="60" x2="220" y2="80"/>
				<text x="220" y="90" class="head centered">HEAD</text>
			</g>
			<g class="fragment" data-fragment-index="1">
				<use x="265" y="30" href="#arrow-head"/><line x1="265" y1="30" x2="335" y2="30"/>
				<ellipse cx="380" cy="30" class="commit"/><text x="380" y="30" class="commit-id">c4fe9cc</text>
				<use x="380" y="60" href="#arrow-head" transform="rotate(90,380,60)"/><line x1="380" y1="60" x2="380" y2="80"/>
				<text x="380" y="90" class="head centered">HEAD</text>
			</g>
		</svg>
		<p class="fragment" data-fragment-index="2"><code class="head">HEAD</code> suit le nouveau commit <small>(il est automatiquement <em>checked out</em>)</small>.</p>
	</section>

	<section>
		<h3 class="branch">Branches</h3>
		<p class="fragment" data-fragment-index="0">Et quand on crÃ©e un nouveau commit&nbsp;?</p>
		<svg viewBox="-5 -5 435 105" style="max-height: 13vh;">
			<ellipse cx="45" cy="30" class="commit"/><text x="45" y="30" class="commit-id">f37c942</text>
			<use x="45" y="60" href="#arrow-head" transform="rotate(90,45,60)"/><line x1="45" y1="60" x2="45" y2="80"/>
			<text x="45" y="90" class="branch centered">master</text>
				<use x="90" y="30" href="#arrow-head"/><line x1="90" y1="30" x2="175" y2="30"/>
			<ellipse cx="220" cy="30" class="commit"/><text x="220" y="30" class="commit-id">984b311</text>
			<use x="220" y="60" href="#arrow-head" transform="rotate(151,220,60)"/><line x1="220" y1="60" x2="180" y2="82"/>
			<text x="177" y="90" class="branch right">develop</text>
			<g class="fragment fade-out" data-fragment-index="1">
				<use x="220" y="60" href="#arrow-head" transform="rotate(38,220,60)"/><line x1="220" y1="60" x2="250" y2="80"/>
				<text x="250" y="90" class="branch centered">crash-fix</text>
				<use x="293" y="90" href="#arrow-head"/><line x1="293" y1="90" x2="323" y2="90"/>
				<text x="325" y="90" class="head">HEAD</text>
			</g>
			<g class="fragment" data-fragment-index="1">
				<use x="265" y="30" href="#arrow-head"/><line x1="265" y1="30" x2="335" y2="30"/>
				<ellipse cx="380" cy="30" class="commit"/><text x="380" y="30" class="commit-id">c4fe9cc</text>
				<use x="380" y="60" href="#arrow-head" transform="rotate(90,380,60)"/><line x1="380" y1="60" x2="380" y2="80"/>
				<text x="380" y="90" class="branch centered">crash-fix</text>
				<use x="338" y="90" href="#arrow-head" transform="rotate(-180,338,90)"/><line x1="338" y1="90" x2="320" y2="90"/>
				<text x="318" y="90" class="head right">HEAD</text>
			</g>
		</svg>
		<p class="fragment" data-fragment-index="2">Une <span class="branch">branche</span> suit le commit <strong>si et seulement si elle est <em class="head">checked out</em></strong>.</p>
	</section>

	<section>
		<h3 class="tag">Tags</h3>
		<p class="fragment">Un tag est <strong>inamovible</strong> et ne peut pas Ãªtre <em class="head">checked out</em>, il ne suit donc jamais un nouveau commit.</p>
		<p class="fragment"><small>(Pour Â«dÃ©placerÂ» un tag, il faut le supprimer et le re-crÃ©er ailleurs.)</small></p>
		<p class="fragment">â” Une branche sert Ã  <em>suivre</em> quelque chose (dÃ©veloppement d'une fonctionnalitÃ©...)&nbsp;; un tag sert Ã  <em>marquer</em> un commit particulier (version...)</p>
	</section>
</section>

<section>
	<h2>Parlons commandes</h2>
	<section>
		<p class="fragment">Essayez d'<a href="https://cbea.ms/git-commit#learn-to-love-the-command-line-leave-the-ide-behind-">Ã©viter les interfaces graphiques</a> si possible.</p>
		<p class="fragment">(Au moins au dÃ©but.)</p>
		<p class="fragment">Par exemple, leur gestion des erreurs est souvent hasardeuse...</p>
	</section>

	<section>
		<h3>CrÃ©er un nouveau dÃ©pÃ´t Git</h3>
		{% highlight console %}
		$ git init
		{%- endhighlight %}
		<p class="fragment">CrÃ©e un nouveau dÃ©pÃ´t <strong>dans le rÃ©pertoire courant</strong>.</p>
	</section>

	<section>
		<h3>Qu'est-ce qui fait un dÃ©pÃ´t Git&nbsp;?</h3>
		<p class="fragment" data-fragment-index="0">RÃ©ponse&nbsp;: le rÃ©pertoire<sup aria-describedby="footnote-gitdir">1</sup> <code>.git</code>.</p>
		<ul>
			<li class="fragment" data-fragment-index="1">Git ne stocke rien en dehors de ce rÃ©pertoire.</li>
			<li class="fragment" data-fragment-index="2">On peut librement dÃ©placer le rÃ©pertoire parent, Git ne stocke aucun chemin absolu.</li>
			<li class="fragment" data-fragment-index="3">Git le cherche Ã©galement dans tous les rÃ©pertoires parents du rÃ©pertoire courant.</li>
		</ul>
		<p class="fragment" data-fragment-index="0"><small id="footnote-gitdir"><sup>1</sup> Dans certains cas c'est un fichier.</small></p>
	</section>

	<section>
		<h3>CrÃ©er un commit</h3>
		<script id="asciicast-30" src="https://asciinema.celforyon.fr/a/30.js" async data-rows="10"></script>
		<p class="fragment">Apparemment il y a eu une erreur&nbsp;?</p>
		<p class="fragment">CrÃ©ons quelques fichiers.</p>

		<aside class="notes">
			<p>NB&nbsp;: aprÃ¨s avoir cliquÃ© dans le terminal, les contrÃ´les de la prÃ©sentation sont dÃ©sactivÃ©s. Cliquez en-dehors du terminal pour les rÃ©activer.</p>
		</aside>
	</section>

	<section>
		<h3>Â«OÃ¹ en suis-je&nbsp;?Â»</h3>
		<script id="asciicast-31" src="https://asciinema.celforyon.fr/a/31.js" async data-rows="15"></script>

		<aside class="notes">
			<p><code>git status</code> est une commande extrÃªmement utile, car elle permet Ã  tout moment de savoir dans quel Ã©tat on se trouve&nbsp;; parfois, on a oubliÃ© qu'on Ã©tait au milieu d'une opÃ©ration, et Ã§a provoque des comportements inattendus.</p>
			<p>Conseil&nbsp;: si <code>git status</code> indique quelque chose que vous ne connaissez ou ne comprenez pas, faites appel Ã  un ami ou collÃ¨gue qui s'y connaÃ®t&nbsp;! ğŸ˜‰</p>
		</aside>
	</section>

	<section>
		<h3>Parlons <em>staging</em></h3>
		<p class="fragment fade-in-then-out"><small>Promis c'est le dernier truc</small></p>
		<p class="fragment">Git permet de choisir quelles modifications vont Ãªtre enregistrÃ©es dans le prochain commit.</p>
		<p class="fragment">On le fait via la commande <code>git add</code> suggÃ©rÃ©e par le message d'aide plus tÃ´t.</p>
	</section>

	<section>
		<script id="asciicast-32" src="https://asciinema.celforyon.fr/a/32.js" async></script>

		<aside class="notes">
			<p>RÃ©capitulons maintenant toutes les commandes que nous venons de voir, et terminons avec un exemple d'utilisation de <code>git commit</code>.</p>
		</aside>
	</section>
</section>

<section>
	<h2>Ã‰diteur interactif</h2>
	<section>
		<p class="fragment">On vient de voir <code>git commit</code> ouvrir un Ã©diteur de texte.</p>
		<figure class="fragment">
			<blockquote><small>
				Ã‰diteur de texte utilisÃ© par les commandes Git.
				Cette valeur est intÃ©rprÃ©tÃ©e par le shell quand elle est utilisÃ©e.
				Exemples&nbsp;: <code>~/bin/vi</code>, <code>$UNE_VARIABLE_D_ENVIRONNEMENT</code>, <code>"C:\Program Files\Vim\gvim.exe" --nofork</code>.
				L'ordre de prÃ©fÃ©rence est la variable d'environnement <code>$GIT_EDITOR</code>, puis la configuration <code>core.editor</code>, puis <code>$VISUAL</code>, puis <code>$EDITOR</code>, puis la valeur par dÃ©faut choisie Ã  la compilation, qui est habituellement <code>vi</code>.
			</small></blockquote>
			<figcaption><small>
				Source&nbsp;: <a href="https://git-scm.com/docs/git-var/fr#Documentation/git-var.txt-GITEDITOR">documentation de <code>GIT_EDITOR</code> dans <code>git-var</code></a>.
			</small></figcaption>
		</figure>
	</section>

	<section>
		<h3>Changer la configuration</h3>
		<p class="fragment">L'Ã©diteur utilisÃ© par dÃ©faut est <code>vi</code>, qui a une ergonomie... particuliÃ¨re.</p>
		<p class="fragment">Pour le changer pour <code>nano</code> (par exemple)&nbsp;:</p>
		<div class="fragment">{% highlight console %}
			$ git config --global core.editor "nano"
		{%- endhighlight %}</div>
		<div class="fragment">
			<small>Positionner <code>EDITOR</code> dans son <code>.bashrc</code>/<code>.zshrc</code> fonctionne aussi.</small>
			{% highlight bash mark_lines="2" %}
				# ...
				export EDITOR=nano
				# ...
			{%- endhighlight %}
		</div>
	</section>

	<section>
		<h3>Utiliser un Ã©diteur graphique</h3>
		<p class="fragment">Oui c'est possible&nbsp;!</p>
		<p class="fragment">Il faut cependant s'assurer que la commande ne quitte que quand le fichier est fermÃ©&nbsp;:</p>
		<dl style="display: block;">
			<div class="fragment"><dt>Sublime Text</dt><dd>{% highlight console %}$ git config --global core.editor "subl -w"{% endhighlight %}</dd></div>
			<div class="fragment"><dt>VS Code</dt><dd>{% highlight console %}$ git config --global core.editor "code -w"{% endhighlight %}</dd></div>
		</dl>

		<aside class="notes">
			<p>Ayant une place limitÃ©e dans ces diapositives, je n'ai listÃ© que deux exemples&nbsp;; si vous utilisez un autre Ã©diteur, consultez sa documentation pour trouver une ligne de commande Ã©quivalente.</p>
		</aside>
	</section>
</section>

<section>
	<h2>La collaboration</h2>
	<section>
		<p class="fragment">Git sur sa machine = outil de backup (et plus)</p>
		<p class="fragment">Git sur plusieurs machines = ğŸ¤¯</p>
	</section>

	<section>
		<h3>Principe</h3>
		<p class="fragment">Chaque machine contient un dÃ©pÃ´t Git. <small class="fragment">RÃ©pertoire <code>.git</code>, etc.</small></p>
		<p class="fragment">On peut Â«pousserÂ» des modifications vers une autre machine, et Â«tirerÂ» des modifs depuis.</p>
	</section>

	<section>
		<svg viewBox="40 -5 960 545">
			<defs>
				<g id="laptop" style="stroke-width: 2px;"><polygon points="10,0 70,0 70,50 10,50" style="fill: var(--r-background-color);"/><polygon points="10,50 70,50 80,70 0,70" fill-opacity="0.6"/></g>
			</defs>
			<style>.cmd { font-size: 18px; }</style>

			<use x="150" y="50" href="#laptop"/><text x="190" y="75" class="centered">origin</text>

			<g class="fragment" data-fragment-index="2">
				<ellipse cx="295" cy="30" class="commit"/><text x="295" y="30" class="commit-id">6846ef5</text>
				<g class="fragment fade-out" data-fragment-index="6">
					<use x="295" y="60" href="#arrow-head" transform="rotate(90,295,60)"/><line x1="295" y1="60" x2="295" y2="90"/><text x="295" y="100" class="branch centered">master</text>
				</g>
			</g>
			<g class="fragment" data-fragment-index="6">
					<use x="340" y="30" href="#arrow-head"/><line x1="340" y1="30" x2="375" y2="30"/>
				<ellipse cx="420" cy="30" class="commit"/><text x="420" y="30" class="commit-id">ac2b311</text>
					<use x="465" y="30" href="#arrow-head"/><line x1="465" y1="30" x2="500" y2="30"/>
				<ellipse cx="545" cy="30" class="commit"/><text x="545" y="30" class="commit-id">1234567</text>
				<g class="fragment fade-out" data-fragment-index="9">
					<use x="545" y="60" href="#arrow-head" transform="rotate(90,545,60)"/><line x1="545" y1="60" x2="545" y2="90"/><text x="545" y="100" class="branch centered">master</text>
				</g>
			</g>
			<g class="fragment" data-fragment-index="9">
					<use x="590" y="30" href="#arrow-head"/><line x1="590" y1="30" x2="625" y2="30"/>
				<ellipse cx="670" cy="30" class="commit"/><text x="670" y="30" class="commit-id">3d5f4a2</text>
					<use x="670" y="60" href="#arrow-head" transform="rotate(90,670,60)"/><line x1="670" y1="60" x2="670" y2="90"/><text x="670" y="100" class="branch centered">master</text>
			</g>

			<use x="170" y="415" href="#laptop"/><text x="210" y="440" class="centered">tsfe01</text>
			<text x="270" y="425" class="cmd fragment" data-fragment-index="0">$ git init</text>
			<text x="270" y="445" class="cmd fragment" data-fragment-index="1">$ git commit</text>
			<text x="270" y="465" class="cmd fragment" data-fragment-index="2">$ git push</text>
			<g class="fragment fade-in-then-out" data-fragment-index="2">
				<use x="280" y="120" href="#arrow-head" transform="rotate(137,280,120)"/><line x1="280" y1="120" x2="100" y2="290"/>
			</g>
			<text x="270" y="485" class="cmd fragment" data-fragment-index="7">$ git pull</text>
			<g class="fragment fade-in-then-out" data-fragment-index="7">
				<use x="360" y="290" href="#arrow-head" transform="rotate(-43,360,290)"/><line x1="360" y1="290" x2="530" y2="120"/>
			</g>
			<text x="270" y="505" class="cmd fragment" data-fragment-index="8">$ git commit</text>
			<text x="270" y="525" class="cmd fragment" data-fragment-index="9">$ git push</text>
			<g class="fragment fade-in-then-out" data-fragment-index="9">
				<use x="655" y="120" href="#arrow-head" transform="rotate(137,655,120)"/><line x1="655" y1="120" x2="485" y2="290"/>
			</g>

			<g class="fragment" data-fragment-index="1">
				<ellipse cx="95" cy="330" class="commit"/><text x="95" y="330" class="commit-id">6846ef5</text>
				<g class="fragment fade-out" data-fragment-index="7">
					<use x="95" y="360" href="#arrow-head" transform="rotate(90,95,360)"/><line x1="95" y1="360" x2="95" y2="390"/><text x="95" y="400" class="branch centered">master</text>
				</g>
			</g>
			<g class="fragment" data-fragment-index="7">
					<use x="140" y="330" href="#arrow-head"/><line x1="140" y1="330" x2="175" y2="330"/>
				<ellipse cx="220" cy="330" class="commit"/><text x="220" y="330" class="commit-id">ac2b311</text>
					<use x="265" y="330" href="#arrow-head"/><line x1="265" y1="330" x2="300" y2="330"/>
				<ellipse cx="345" cy="330" class="commit"/><text x="345" y="330" class="commit-id">1234567</text>
				<g class="fragment fade-out" data-fragment-index="8">
					<use x="345" y="360" href="#arrow-head" transform="rotate(90,345,360)"/><line x1="345" y1="360" x2="345" y2="390"/><text x="345" y="400" class="branch centered">master</text>
				</g>
			</g>
			<g class="fragment" data-fragment-index="8">
					<use x="390" y="330" href="#arrow-head"/><line x1="390" y1="330" x2="425" y2="330"/>
				<ellipse cx="470" cy="330" class="commit"/><text x="470" y="330" class="commit-id">3d5f4a2</text>
					<use x="470" y="360" href="#arrow-head" transform="rotate(90,470,360)"/><line x1="470" y1="360" x2="470" y2="390"/><text x="470" y="400" class="branch centered">master</text>
			</g>

			<use x="870" y="415" href="#laptop"/><text x="910" y="440" class="centered">tsfe02</text>
			<text x="720" y="425" class="cmd fragment" data-fragment-index="3">$ git clone</text>
			<g class="fragment fade-in-then-out" data-fragment-index="3">
				<use x="680" y="290" href="#arrow-head" transform="rotate(-155,680,290)"/><line x1="680" y1="290" x2="310" y2="120"/>
			</g>
			<text x="720" y="445" class="cmd fragment" data-fragment-index="4">$ git commit</text>
			<text x="720" y="465" class="cmd fragment" data-fragment-index="5">$ git commit</text>
			<text x="720" y="485" class="cmd fragment" data-fragment-index="6">$ git push</text>
			<g class="fragment fade-in-then-out" data-fragment-index="6">
				<use x="560" y="120" href="#arrow-head" transform="rotate(27,560,120)"/><line x1="560" y1="120" x2="930" y2="290"/>
			</g>

			<g class="fragment" data-fragment-index="3">
				<ellipse cx="695" cy="330" class="commit"/><text x="695" y="330" class="commit-id">6846ef5</text>
				<g class="fragment fade-out" data-fragment-index="4">
					<use x="695" y="360" href="#arrow-head" transform="rotate(90,695,360)"/><line x1="695" y1="360" x2="695" y2="390"/><text x="695" y="400" class="branch centered">master</text>
				</g>
			</g>
			<g class="fragment" data-fragment-index="4">
					<use x="740" y="330" href="#arrow-head"/><line x1="740" y1="330" x2="775" y2="330"/>
				<ellipse cx="820" cy="330" class="commit"/><text x="820" y="330" class="commit-id">ac2b311</text>
				<g class="fragment fade-out" data-fragment-index="5">
					<use x="820" y="360" href="#arrow-head" transform="rotate(90,820,360)"/><line x1="820" y1="360" x2="820" y2="390"/><text x="820" y="400" class="branch centered">master</text>
				</g>
			</g>
			<g class="fragment" data-fragment-index="5">
					<use x="865" y="330" href="#arrow-head"/><line x1="865" y1="330" x2="900" y2="330"/>
				<ellipse cx="945" cy="330" class="commit"/><text x="945" y="330" class="commit-id">1234567</text>
				<use x="945" y="360" href="#arrow-head" transform="rotate(90,945,360)"/><line x1="945" y1="360" x2="945" y2="390"/><text x="945" y="400" class="branch centered">master</text>
			</g>
		</svg>

		<aside class="notes">
			<p>Voici un scÃ©nario d'utilisation de Git sur plusieurs machines.</p>
			<p>(Certaines des commandes seront expliquÃ©es dans les diapositives suivantes.)</p>
			<p>L'essentiel Ã  retenir&nbsp;: chaque modification (nouveau commit) est d'abord effectuÃ©e localement, puis publiÃ©e, et ensuite rÃ©cupÃ©rÃ©e par tout le monde.</p>
		</aside>
	</section>

	<section>
		<h3>RÃ©sumÃ©</h3>
		<ul>
			<li class="fragment">Pour crÃ©er un nouveau repo Ã  partir d'un existant: <code>git clone</code></li>
			<li class="fragment">Pour rapatrier les mises Ã  jour depuis un repo distant&nbsp;: <code>git pull</code></li>
			<li class="fragment">Pour publier ses modifications&nbsp;: <code>git push</code></li>
		</ul>
	</section>

	<section>
		<h3>Un peu plus de terminologie</h3>
		<p class="fragment">Git modÃ©lise les machines distantes via des <strong>remotes</strong>. <small class="fragment">(Â«RemoteÂ» en anglais = Â«distantÂ»)</small></p>
		<p class="fragment">Une remote = un certain repo sur une certaine machine <small class="fragment">(grosso modo)</small>.</p>
		<p class="fragment">On gÃ¨re les remotes via <code>git remote</code>&nbsp;!</p>
	</section>

	<section>
		<h3>Remotes &amp; refs</h3>
		<svg viewBox="30 -5 540 395" style="max-height: 450px;">
			<defs>
				<g id="laptop" style="stroke-width: 2px;"><polygon points="10,0 70,0 70,50 10,50" style="fill: var(--r-background-color);"/><polygon points="10,50 70,50 80,70 0,70" fill-opacity="0.6"/></g>
			</defs>
			<style>.cmd { font-size: 18px; }</style>

			<use x="150" y="50" href="#laptop"/><g class="fragment highlight-current-red" data-fragment-index="3"><text x="190" y="75" class="centered">origin</text></g>

			<ellipse cx="295" cy="30" class="commit"/><text x="295" y="30" class="commit-id">ac2b311</text>
			<use x="295" y="60" href="#arrow-head" transform="rotate(90,295,60)"/><line x1="295" y1="60" x2="295" y2="90"/><text x="295" y="100" class="branch centered">master</text>
				<use x="340" y="30" href="#arrow-head"/><line x1="340" y1="30" x2="375" y2="30"/>
			<ellipse cx="420" cy="30" class="commit"/><text x="420" y="30" class="commit-id">6846ef5</text>
				<use x="420" y="60" href="#arrow-head" transform="rotate(90,420,60)"/><line x1="420" y1="60" x2="420" y2="90"/><text x="420" y="100" class="branch centered">develop</text>

			<use x="50" y="315" href="#laptop" style="color: cyan;"/><text x="90" y="340" class="centered">tsfe01</text>

				<line stroke-dasharray="2 2 2 2 2 2 999" x1="30" y1="230" x2="50" y2="230"/>
			<ellipse cx="95" cy="230" class="commit"/><text x="95" y="230" class="commit-id">6846ef5</text>
				<use x="95" y="260" href="#arrow-head" transform="rotate(90,95,260)"/><line x1="95" y1="260" x2="95" y2="290"/><text x="95" y="300" class="branch centered">develop</text>
				<use x="140" y="230" href="#arrow-head"/><line x1="140" y1="230" x2="175" y2="230"/>
			<ellipse cx="220" cy="230" class="commit"/><text x="220" y="230" class="commit-id">06adada</text>
				<use x="220" y="260" href="#arrow-head" transform="rotate(90,220,260)"/><line x1="220" y1="260" x2="220" y2="290"/><text x="220" y="300" class="branch centered">fix-tests</text>

			<use x="480" y="315" href="#laptop"/><g class="fragment highlight-current-red" data-fragment-index="5"><text x="520" y="340" class="centered">tsfe02</text></g>

			<ellipse cx="395" cy="230" class="commit"/><text x="395" y="230" class="commit-id">ac2b311</text>
				<use x="395" y="260" href="#arrow-head" transform="rotate(90,395,260)"/><line x1="395" y1="260" x2="395" y2="290"/><text x="395" y="300" class="branch centered">develop</text>
				<use x="440" y="230" href="#arrow-head"/><line x1="440" y1="230" x2="475" y2="230"/>
			<ellipse cx="520" cy="230" class="commit"/><text x="520" y="230" class="commit-id">24a8c81</text>
				<use x="520" y="260" href="#arrow-head" transform="rotate(90,520,260)"/><line x1="520" y1="260" x2="520" y2="290"/><text x="520" y="300" class="branch centered">lts-fixes</text>

			<text x="160" y="340" class="fragment branch" data-fragment-index="0">develop</text>
			<use x="125" y="310" href="#arrow-head" transform="rotate(40,125,310)" class="fragment" data-fragment-index="1"/><line x1="125" y1="310" x2="155" y2="335" class="fragment" data-fragment-index="1"/>
			<text x="160" y="360" class="fragment remote-ref" data-fragment-index="2">origin/develop</text>
			<use x="390" y="110" href="#arrow-head" transform="rotate(120,390,110)" class="fragment" data-fragment-index="3"/><line x1="390" y1="110" x2="250" y2="350" class="fragment" data-fragment-index="3"/>
			<text x="160" y="380" class="fragment remote-ref" data-fragment-index="4">tsfe02/develop</text>
			<use x="380" y="310" href="#arrow-head" transform="rotate(148,380,310)" class="fragment" data-fragment-index="5"/><line x1="380" y1="310" x2="280" y2="370" class="fragment" data-fragment-index="5"/>
		</svg>

		<aside class="notes">
			<p>Allez, c'est l'heure d'un petit exercice&nbsp;!</p>
			<p>Supposons qu'on soit sur la machine <code>tsfe01</code>, et qu'on ait deux <em>remotes</em>, <code>origin</code> et <code>tsfe02</code>.</p>
			<p>Ã€ quelles branches se rÃ©fÃ¨rent les Â«refsÂ» <code class="branch">develop</code>, <code class="remote-ref">origin/develop</code>, et <code class="remote-ref">tsfe02/develop</code>&nbsp;?</p>
		</aside>
	</section>

	<section>
		<h3><code>git fetch</code></h3>
		<p class="fragment">Git ne va pas faire des requÃªtes Ã  chaque commande.</p>
		<ul>
			<li class="fragment">Ã‰conome en bande passante</li>
			<li class="fragment">Permet de travailler hors-ligne</li>
		</ul>
		<p class="fragment">Pour se tenir au jus&nbsp;: <code>git fetch <var>&lt;remote&gt;</var></code>.</p>
		<p class="fragment"><small>(<code>git pull</code> appelle implicitement <code>git fetch</code>.)</small></p>
	</section>
</section>

<section>
	<h2>La collaboration (2)</h2>

	<section>
		<h3>Ã‡a tourne mal</h3>
		<svg viewBox="40 -5 540 395" style="max-height: 450px;">
			<defs>
				<g id="laptop" style="stroke-width: 2px;"><polygon points="10,0 70,0 70,50 10,50" style="fill: var(--r-background-color);"/><polygon points="10,50 70,50 80,70 0,70" fill-opacity="0.6"/></g>
			</defs>
			<style>.cmd { font-size: 18px; }</style>

			<use x="150" y="50" href="#laptop"/><text x="190" y="75" class="centered">origin</text>

			<ellipse cx="295" cy="30" class="commit"/><text x="295" y="30" class="commit-id">6846ef5</text>
			<g class="fragment fade-out" data-fragment-index="2">
				<use x="295" y="60" href="#arrow-head" transform="rotate(90,295,60)"/><line x1="295" y1="60" x2="295" y2="90"/><text x="295" y="100" class="branch centered">master</text>
			</g>
			<g class="fragment" data-fragment-index="2">
					<use x="340" y="30" href="#arrow-head"/><line x1="340" y1="30" x2="375" y2="30"/>
				<ellipse cx="420" cy="30" class="commit"/><text x="420" y="30" class="commit-id">ac2b311</text>
					<use x="420" y="60" href="#arrow-head" transform="rotate(90,420,60)"/><line x1="420" y1="60" x2="420" y2="90"/><text x="420" y="100" class="branch centered">master</text>
			</g>

			<use x="50" y="315" href="#laptop"/><text x="90" y="340" class="centered">tsfe01</text>
			<text x="150" y="345" class="cmd fragment" data-fragment-index="1">$ git commit</text>
			<text x="150" y="365" class="cmd fragment" data-fragment-index="3">$ git push</text>
			<g class="fragment" data-fragment-index="3">
				<use x="400" y="120" href="#arrow-head" transform="rotate(157,400,120)"/><line x1="400" y1="120" x2="235" y2="190"/>
			</g>
			<text x="315" y="145" class="centered fragment fade-up" data-fragment-index="4" style="font-size: 20px;">?</text>

			<ellipse cx="95" cy="230" class="commit"/><text x="95" y="230" class="commit-id">6846ef5</text>
			<g class="fragment fade-out" data-fragment-index="1">
				<use x="95" y="260" href="#arrow-head" transform="rotate(90,95,260)"/><line x1="95" y1="260" x2="95" y2="290"/><text x="95" y="300" class="branch centered">master</text>
			</g>
			<g class="fragment" data-fragment-index="1">
					<use x="140" y="230" href="#arrow-head"/><line x1="140" y1="230" x2="175" y2="230"/>
				<ellipse cx="220" cy="230" class="commit"/><text x="220" y="230" class="commit-id">06adada</text>
					<use x="220" y="260" href="#arrow-head" transform="rotate(90,220,260)"/><line x1="220" y1="260" x2="220" y2="290"/><text x="220" y="300" class="branch centered">master</text>
			</g>

			<use x="480" y="315" href="#laptop"/><text x="520" y="340" class="centered">tsfe02</text>
			<text x="340" y="345" class="cmd fragment" data-fragment-index="0">$ git commit</text>
			<text x="340" y="365" class="cmd fragment" data-fragment-index="2">$ git push</text>
			<g class="fragment fade-in-then-out" data-fragment-index="2">
				<use x="440" y="120" href="#arrow-head" transform="rotate(50,440,120)"/><line x1="440" y1="120" x2="510" y2="190"/>
			</g>

			<ellipse cx="395" cy="230" class="commit"/><text x="395" y="230" class="commit-id">6846ef5</text>
			<g class="fragment fade-out" data-fragment-index="0">
				<use x="395" y="260" href="#arrow-head" transform="rotate(90,395,260)"/><line x1="395" y1="260" x2="395" y2="290"/><text x="395" y="300" class="branch centered">master</text>
			</g>
			<g class="fragment" data-fragment-index="0">
					<use x="440" y="230" href="#arrow-head"/><line x1="440" y1="230" x2="475" y2="230"/>
				<ellipse cx="520" cy="230" class="commit"/><text x="520" y="230" class="commit-id">ac2b311</text>
					<use x="520" y="260" href="#arrow-head" transform="rotate(90,520,260)"/><line x1="520" y1="260" x2="520" y2="290"/><text x="520" y="300" class="branch centered">master</text>
			</g>
		</svg>

		<aside class="notes">
			<p>Jusqu'ici, on n'a vu que des cas oÃ¹ tout se passait bien.</p>
			<p>Pourtant, il est extrÃªmement courant de se retrouver dans une situation de conflit.</p>
			<p>Partons d'une configuration oÃ¹ tout le monde est d'accord, et voyons comment causer un problÃ¨me en seulement quatre commandes&nbsp;!</p>
		</aside>
	</section>

	<section>
		<h3>Ã‡a tourne mal...</h3>

		<p class="fragment" data-fragment-index="0">...mais Git couvre nos arriÃ¨res.</p>
		<pre class="fragment" data-fragment-index="0"><small><code><span class="prompt">issotm@sheik-kitty</span> <span class="cwd">/tmp/test</span>% git push
To example.com:chemin/vers/repo.git
<span class="error"> ! [rejected]</span>        master -> master (<span class="fragment highlight-green" data-fragment-index="1">non-fast-forward</span>)
<span class="error">error: failed to push some refs to 'example.com:chemin/vers/repo.git'</span>
<span class="warning">hint: Updates were rejected because a pushed branch tip is behind its remote
hint: counterpart. Check out this branch and integrate the remote changes
hint: (e.g. 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.</span></code></small></pre>
		<p class="fragment" data-fragment-index="1">... Â«non-fast-forwardÂ»&nbsp;?</p>

		<aside class="notes">
			<p>Fort heureusement, Git n'autorisera pas ce dernier <code>git push</code>.</p>
			<p>Le message d'erreur peut faire un peu peur, mais <strong>ne vous inquiÃ©tez pas</strong>, il indique en fait que <strong>rien ne s'est passÃ©</strong>.</p>
			<p>Ceci dit, il est intÃ©ressant de se pencher sur un certain terme prÃ©sent dans ce message d'erreur...</p>
		</aside>
	</section>

	<section>
		<h3>Fast-forwarding</h3>

		<p class="fragment" data-fragment-index="0">Â«Fast-forwarderÂ» une branche signifie Â«la dÃ©placer uniquement vers des commits enfantsÂ»&nbsp;:</p>
		<svg viewBox="40 -5 500 220" class="fragment" data-fragment-index="1" style="max-height: 360px;">
			<ellipse cx="95" cy="30" class="commit"/><text x="95" y="30" class="commit-id">6846ef5</text>
				<use x="140" y="30" href="#arrow-head"/><line x1="140" y1="30" x2="175" y2="30"/>
			<ellipse cx="220" cy="30" class="commit"/><text x="220" y="30" class="commit-id">ac2b311</text>
				<use x="220" y="60" href="#arrow-head" transform="rotate(90,220,60)"/><line x1="220" y1="60" x2="220" y2="80"/><text x="220" y="90" class="branch centered">master</text>
				<use x="265" y="30" href="#arrow-head"/><line x1="265" y1="30" x2="300" y2="30"/>
			<ellipse cx="345" cy="30" class="commit"/><text x="345" y="30" class="commit-id">1234567</text>
				<use x="130" y="50" href="#arrow-head" transform="rotate(58,130,50)"/><line x1="130" y1="50" x2="175" y2="120"/>
			<ellipse cx="200" cy="140" class="commit"/><text x="200" y="140" class="commit-id">06adada</text>
				<use x="255" y="50" href="#arrow-head" transform="rotate(58,255,50)"/><line x1="255" y1="50" x2="300" y2="120"/>
			<ellipse cx="325" cy="140" class="commit"/><text x="325" y="140" class="commit-id">3d5f4a2</text>
				<use x="390" y="30" href="#arrow-head"/><line x1="390" y1="30" x2="425" y2="30"/>
			<ellipse cx="470" cy="30" class="commit"/><text x="470" y="30" class="commit-id">feedfac</text>
			<g class="fragment" data-fragment-index="2">
				<g class="fragment fade-out" data-fragment-index="4">
					<use x="345" y="60" href="#arrow-head" transform="rotate(90,345,60)"/><line x1="345" y1="60" x2="345" y2="80"/><text x="345" y="90" class="branch centered">master</text>
					<g class="fragment highlight-green" data-fragment-index="3">
						<use x="315" y="90" href="#arrow-head" transform="rotate(-180,315,90)"/><line x1="315" y1="90" x2="250" y2="90"/>
					</g>
				</g>
			</g>
			<g class="fragment" data-fragment-index="4">
				<g class="fragment fade-out" data-fragment-index="6">
					<use x="95" y="60" href="#arrow-head" transform="rotate(90,95,60)"/><line x1="95" y1="60" x2="95" y2="80"/><text x="95" y="90" class="branch centered">master</text>
					<g class="fragment highlight-red" data-fragment-index="5">
						<use x="125" y="90" href="#arrow-head"/><line x1="125" y1="90" x2="190" y2="90"/>
					</g>
				</g>
			</g>
			<g class="fragment" data-fragment-index="6">
				<g class="fragment fade-out" data-fragment-index="8">
					<use x="325" y="170" href="#arrow-head" transform="rotate(90,325,170)"/><line x1="325" y1="170" x2="325" y2="190"/><text x="325" y="200" class="branch centered">master</text>
					<g class="fragment highlight-green" data-fragment-index="7">
						<use x="300" y="190" href="#arrow-head" transform="rotate(-123,300,190)"/><line x1="300" y1="190" x2="240" y2="100"/>
					</g>
				</g>
			</g>
			<g class="fragment" data-fragment-index="8">
				<g class="fragment fade-out" data-fragment-index="10">
					<use x="470" y="60" href="#arrow-head" transform="rotate(90,470,60)"/><line x1="470" y1="60" x2="470" y2="80"/><text x="470" y="90" class="branch centered">master</text>
					<g class="fragment highlight-green" data-fragment-index="9">
						<use x="440" y="90" href="#arrow-head" transform="rotate(-180,440,90)"/><line x1="440" y1="90" x2="250" y2="90"/>
					</g>
				</g>
			</g>
			<g class="fragment" data-fragment-index="10">
				<g class="fragment fade-out" data-fragment-index="12">
					<use x="200" y="170" href="#arrow-head" transform="rotate(90,200,170)"/><line x1="200" y1="170" x2="200" y2="190"/><text x="200" y="200" class="branch centered">master</text>
					<g class="fragment highlight-red" data-fragment-index="11">
						<use x="170" y="200" href="#arrow-head" transform="rotate(-167,170,200)"/><path d="M 170,200 c -40,0 -60,-110 20,-110"/>
					</g>
				</g>
			</g>
		</svg>

		<aside class="notes">
			<p>Le <strong>fast-forwarding</strong> est un concept <strong>crucial</strong>&nbsp;!</p>
			<p>Afin d'aider Ã  mieux comprendre sa dÃ©finition, voici un petit jeu&nbsp;: pour chacun des dÃ©placements de la branche <code class="branch">master</code>, essayez de deviner s'il est Â«fast-forwardÂ» ou non.</p>
		</aside>
	</section>

	<section>
		<h3>Fast-forwarding</h3>

		<p class="fragment"><small>Â«Fast-forwardingÂ» parce que Â«avance rapideÂ» dans le temps.</small></p>
		<p class="fragment">Fast-forward = toujours safe (on ne peut Â«perdreÂ» aucun commit).</p>
		<p class="fragment">...et dans les autres cas&nbsp;?</p>
		<ul>
			<li class="fragment"><code>git merge</code></li>
			<li class="fragment"><code>git rebase</code></li>
		</ul>
	</section>
</section>

<section>
	<h2>Merge</h2>

	<section>
		<h3>Principe</h3>
		<svg viewBox="40 -5 500 215" style="max-height: 360px;">
			<ellipse cx="95" cy="30" class="commit"/><text x="95" y="30" class="commit-id">6846ef5</text>
				<use x="140" y="30" href="#arrow-head"/><line x1="140" y1="30" x2="175" y2="30"/>
			<ellipse cx="220" cy="30" class="commit"/><text x="220" y="30" class="commit-id">ac2b311</text>
				<use x="265" y="30" href="#arrow-head"/><line x1="265" y1="30" x2="300" y2="30"/>
			<ellipse cx="345" cy="30" class="commit"/><text x="345" y="30" class="commit-id">1234567</text>
				<use x="345" y="60" href="#arrow-head" transform="rotate(90,345,60)"/><line x1="345" y1="60" x2="345" y2="80"/><text x="345" y="90" class="branch centered">master</text>
				<use x="130" y="50" href="#arrow-head" transform="rotate(58,130,50)"/><line x1="130" y1="50" x2="175" y2="120"/>
			<ellipse cx="200" cy="140" class="commit"/><text x="200" y="140" class="commit-id">06adada</text>
			<g class="fragment fade-out" data-fragment-index="0">
				<use x="325" y="170" href="#arrow-head" transform="rotate(90,325,170)"/><line x1="325" y1="170" x2="325" y2="190"/><text x="325" y="200" class="branch centered">add-dark-mode</text>
			</g>
				<use x="245" y="140" href="#arrow-head"/><line x1="245" y1="140" x2="280" y2="140"/>
			<ellipse cx="325" cy="140" class="commit"/><text x="325" y="140" class="commit-id">3d5f4a2</text>
			<g class="fragment" data-fragment-index="0">
					<use x="470" y="60" href="#arrow-head" transform="rotate(90,470,60)"/><line x1="470" y1="60" x2="470" y2="80"/><text x="470" y="90" class="branch centered">add-dark-mode</text>
					<use x="390" y="30" href="#arrow-head"/><line x1="390" y1="30" x2="425" y2="30"/>
					<use x="365" y="125" href="#arrow-head" transform="rotate(-45,365,125)"/><line x1="365" y1="125" x2="440" y2="40"/>
				<ellipse cx="470" cy="30" class="commit"/><text x="470" y="30" class="commit-id">feedfac</text>
			</g>
			<g class="fragment" data-fragment-index="1" style="color: #17ff2e;">
				<use x="410" y="90" href="#arrow-head" transform="rotate(-180,410,90)"/><line x1="410" y1="90" x2="375" y2="90"/>
			</g>
		</svg>

		<aside class="notes">
			<p>Un Â«mergeÂ» consiste Ã  crÃ©er un nouveau commit (logiquement appelÃ© Â«merge commitÂ»), qui a pour parents les commits qu'on cherche Ã  Â«rassemblerÂ».</p>
			<p>Une fois ce commit crÃ©Ã©, on peut fast-forwarder la branche <code class="branch">master</code> vers <code class="branch">add-dark-mode</code>, puisque <code class="commit-id">feedfac</code> est un commit <strong>enfant</strong> de <code class="commit-id">1234567</code>&nbsp;!</p>
			<p><small>Que <code class="commit-id">feedfac</code> soit aussi un enfant d'un autre commit n'est pas un problÃ¨me&nbsp;: on pourrait imaginer que ce commit contient toutes les modifications introduites dans la branche <code class="branch">add-dark-mode</code>.</small></p>
		</aside>
	</section>

	<section>
		<p>Avantages&nbsp;:</p>
		<ul>
			<li class="fragment">Historique prÃ©servÃ©</li>
		</ul>
		<p>InconvÃ©nients&nbsp;:</p>
		<ul>
			<li class="fragment"><span class="branch">master</span> non linÃ©aire</li>
			<li class="fragment">Les Â«merge commitÂ» sont artificiels</li>
		</ul>
	</section>

	<section>
		<h3>Commande</h3>

		<p class="fragment"><code><a href="https://git-scm.com/docs/git-merge">git merge</a> &lt;commit&gt;...</code></p>
		<p class="fragment">CrÃ©e un nouveau commit <strong>sur la branche actuelle</strong> qui Â«rassembleÂ» la branche actuelle et tous les <code>&lt;commit&gt;</code>s.</p>
		<p class="fragment"><small>On expliquera ce que Â«rassemblementÂ» signifie quand on parlera de <code>rebase</code>.</small></p>
		<p class="fragment">Exemple&nbsp;: <code>git merge <span class="branch">master</span></code></p>
	</section>
</section>

<section>
	<h2>Rebase</h2>

	<section>
		<h3>Principe</h3>

		<svg viewBox="40 -5 600 215" style="max-height: 360px;">
			<ellipse cx="95" cy="30" class="commit"/><text x="95" y="30" class="commit-id">6846ef5</text>
				<use x="140" y="30" href="#arrow-head"/><line x1="140" y1="30" x2="175" y2="30"/>
			<ellipse cx="220" cy="30" class="commit"/><text x="220" y="30" class="commit-id">ac2b311</text>
				<use x="265" y="30" href="#arrow-head"/><line x1="265" y1="30" x2="300" y2="30"/>
			<ellipse cx="345" cy="30" class="commit"/><text x="345" y="30" class="commit-id">1234567</text>
				<use x="345" y="60" href="#arrow-head" transform="rotate(90,345,60)"/><line x1="345" y1="60" x2="345" y2="80"/><text x="345" y="90" class="branch centered">master</text>
			<g class="fragment semi-fade-out" data-fragment-index="0">
					<use x="130" y="50" href="#arrow-head" transform="rotate(58,130,50)"/><line x1="130" y1="50" x2="175" y2="120"/>
				<ellipse cx="200" cy="140" class="commit"/><text x="200" y="140" class="commit-id">06adada</text>
					<use x="245" y="140" href="#arrow-head"/><line x1="245" y1="140" x2="280" y2="140"/>
				<ellipse cx="325" cy="140" class="commit"/><text x="325" y="140" class="commit-id">3d5f4a2</text>
			</g>
			<g class="fragment fade-out" data-fragment-index="0">
				<use x="325" y="170" href="#arrow-head" transform="rotate(90,325,170)"/><line x1="325" y1="170" x2="325" y2="190"/><text x="325" y="200" class="branch centered">add-dark-mode</text>
			</g>
			<g class="fragment" data-fragment-index="0">
					<use x="380" y="50" href="#arrow-head" transform="rotate(58,380,50)"/><line x1="380" y1="50" x2="425" y2="120"/>
				<ellipse cx="450" cy="140" class="commit"/><text x="450" y="140" class="commit-id">14e684a</text>
					<use x="495" y="140" href="#arrow-head"/><line x1="495" y1="140" x2="530" y2="140"/>
				<ellipse cx="575" cy="140" class="commit"/><text x="575" y="140" class="commit-id">af58e36</text>
					<use x="575" y="170" href="#arrow-head" transform="rotate(90,575,170)"/><line x1="575" y1="170" x2="575" y2="190"/><text x="575" y="200" class="branch centered">add-dark-mode</text>
			</g>
			<g class="fragment" data-fragment-index="1" style="color: #17ff2e;">
				<use x="515" y="200" href="#arrow-head" transform="rotate(-180,515,200)"/><path d="M 515,200 c -80,0 -130,-50 -170,-100"/>
			</g>
		</svg>

		<aside class="notes">
			<p>Un Â«rebaseÂ» a une exÃ©cution significativement plus complexe&nbsp;:</p>
			<ol>
				<li>On Â«rembobineÂ» (â€œrewindâ€) <code class="branch">add-dark-mode</code> jusqu'Ã  tomber sur un commit parent de <code class="branch">master</code>&nbsp;;</li>
				<li>On Â«fast-forwardÂ» <code class="branch">add-dark-mode</code> jusqu'Ã  <code class="branch">master</code>&nbsp;;</li>
				<li>Et enfin, on rÃ©-applique chacun des commits qu'on avait Â«rembobinÃ©sÂ» Ã  l'Ã©tape 1.</li>
			</ol>
			<p>Attention&nbsp;: vu qu'on a crÃ©Ã© de <strong>nouveaux</strong> commits Ã  l'Ã©tape 3 (ils n'ont pas les mÃªmes parents que les originaux, et probablement pas la mÃªme date de crÃ©ation), <strong>ils n'ont pas le mÃªme hash</strong>&nbsp;!</p>
		</aside>
	</section>

	<section>
		<h3>Commande</h3>

		<p class="fragment"><code><a href="https://git-scm.com/docs/git-rebase">git rebase</a> &lt;nouv-base&gt; [&lt;branche&gt;]</code></p>
		<p class="fragment">Si <code>&lt;branche&gt;</code> est omis, la branche courante est modifiÃ©e.</p>
		<p class="fragment">Exemple&nbsp;: <code>git rebase <span class="branch">master</span></code> <small class="fragment">(ou <code>git rebase <span class="branch">master</span> <span class="branch">add-dark-mode</span></code>)</small></p>
	</section>
</section>

<section>
	<section>
		<h2>Petit rÃ©capitulatif</h2>

		<aside class="notes">
			<p>Ouf&nbsp;!</p>
			<p>AprÃ¨s toutes ces informations, repassons rapidement sur les commandes les plus importantes qu'on a vues jusqu'ici.</p>
			<p>Si vous Ãªtes joueurs, vous pouvez tenter de deviner la commande associÃ©e aux actions prÃ©sentÃ©es&nbsp;!</p>
		</aside>
	</section>

	<section>
		<h2>CrÃ©er un nouveau repo</h2>

		<p class="fragment"><code>git init</code></p>
		<p class="fragment">âš ï¸ CrÃ©e un repo <strong>dans le rÃ©pertoire courant</strong>&nbsp;!</p>
	</section>

	<section>
		<h2>CrÃ©er une copie locale d'un repo</h2>

		<p class="fragment"><code>git clone &lt;URL&gt;</code></p>
		<div class="fragment">
			<script async id="asciicast-36" src="https://asciinema.celforyon.fr/a/36.js" async></script>
		</div>
	</section>

	<section data-auto-animate>
		<h2>Retrouver ses petits</h2>

		<p class="fragment"><code>git status</code></p>
		<pre class="fragment"><small><code><span class="prompt">issotm@sheik-kitty</span> <span class="cwd">/tmp/rgbds</span>% git status
On branch master
Your branch is up to date with 'origin/master'.

nothing to commit, working tree clean</code></small></pre>
	</section>

	<section data-auto-animate>
		<h2>Retrouver ses petits</h2>

		<p><code>git status</code></p>
		<pre><small><code><span class="prompt">issotm@sheik-kitty</span> <span class="cwd">/tmp/rgbds</span>% git status
On branch master
Your branch is up to date with 'origin/master'.

Changes not staged for commit:
  (use "git add/rm &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        <span class="error">modified:   .editorconfig</span>
        <span class="error">deleted:    .checkpatch.conf</span>

no changes added to commit (use "git add" and/or "git commit -a")</code></small></pre>
	</section>

	<section>
		<h2>SÃ©lectionner les modifs Ã  committer</h2>

		<p class="fragment"><code>git add</code></p>
		<pre class="fragment"><small><code><span class="prompt">issotm@sheik-kitty</span> <span class="cwd">/tmp/rgbds</span>% git add .editorconfig
<span class="prompt">issotm@sheik-kitty</span> <span class="cwd">/tmp/rgbds</span>% git status
On branch master
Your branch is up to date with 'origin/master'.

Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
        <span class="prompt">modified:   .editorconfig</span>

Changes not staged for commit:
  (use "git add/rm &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        <span class="error">deleted:    .checkpatch.conf</span></code></small></pre>
	</section>
</section>

<!-- TODO : checkout, branch, bisect, cherry-pick, rebase -i, stash, blame, add -p, rm, mv ; bon message de commit ; alias -->

	<!-- section>
		<h3>Le garbage collector</h3>
		<p class="fragment">Chaque commit a donc zÃ©ro, une, ou plusieurs flÃ¨ches qui lui pointent dessus. On parle de <em>reference count</em> (refcount), ou Â«compteur de rÃ©fÃ©rencesÂ».</p>
		<p class="fragment"><strong>Un commit dont le refcount arrive Ã  zÃ©ro n'est pas immÃ©diatement supprimÃ©&nbsp;!</strong></p>
		<p class="fragment">On verra pourquoi plus tard.</p>
	</section -->

<section>
	<h2>Goodies</h2>

	<p class="fragment">Un visualiseur plus joli pour <code>git diff</code> et <code>git blame</code>&nbsp;: <a href="https://github.com/dandavison/delta#readme">delta</a></p>
	<p class="fragment">On peut afficher le statut Git dans son prompt de shell (par ex. via <a href="https://github.com/romkatv/powerlevel10k">powerlevel10k</a>)</p>
	<p class="fragment">Une bonne interface graphique (certes freeware)&nbsp;: <a href="https://sublimemerge.com">Sublime Merge</a> <small class="fragment">(je recommande car elle liste les commandes exÃ©cutÃ©es)</small></p>
	<p class="fragment">Si vous utilisez un IDE, il a peut-Ãªtre une intÃ©gration Git (parfois via extensions), lisez la doc</p><!-- Maintenant Enzo va peut-Ãªtre me laisser tranquille -->

	<aside class="notes">
		<p>Git fonctionne trÃ¨s bien tout seul, mais il bÃ©nÃ©ficie Ã©galement d'un excellent Ã©cosystÃ¨me et de bonnes intÃ©grations un peu partout.</p>
		<p>Voici quelques suggestions d'outils pÃ©riphÃ©riques.</p>
	</aside>
</section>

<section>
	<h1>Merci d'avoir suivi&nbsp;!</h1>

	<p>Les slides sont disponibles en ligne&nbsp;: <a href="https://eldred.fr/slides/git">https://eldred.fr/slides/git</a>!</p>
	<img src="assets/git/qr.png" class="r-stretch"/>
</section>
