<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Soutenance projet ZZ2</title>

		<base href="../" />

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<link rel="stylesheet" href="slide_assets/soutenance_zz2/gameboy.css">

		<style type="text/css">
			.small-caps { font-variant-caps: small-caps; }

			.reveal thead > tr > th { vertical-align: bottom; text-align: center; }
			.reveal tbody > tr > td, tbody > tr > th { vertical-align: middle; }
			.reveal tbody > tr > th { text-align: right; }
			.reveal tbody > tr > td { text-align: center; }

			#credits { font-size: 0.7em; }
			#credits td, #credits th { border: none; vertical-align: middle; }
			#credits th { text-align: right; font-variant-caps: small-caps; }
			#credits td { text-align: left; }

			#logos { height: 5vh; }
			#logos > a > img {
				float: right;
				margin-left: 5%;
				height: 100%;

				border-radius: 6px;
			}
			#logos > a > img:not(:hover) {
				border-color: #0000;
				background-color: initial;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1 class="no-toc-progress" style="font-size: 1.5em;">
						<small>Soutenance projet 2<sup>√®me</sup> ann√©e</small><br>
						Adaptateur Ethernet pour Game Boy‚Ñ¢
					</h1>
					<div>
						<div id="gameboy" style="float: left;">
							<div id="back"></div>
							<div id="border"></div>
							<div id="card3"></div>
							<div id="card2"></div>
							<div id="chip2"></div>
							<div id="screenBack"></div>
							<div id="card1"></div>
							<div id="speaker"></div>
							<div id="chip"></div>
							<div id="chipPinL"></div>
							<div id="chipPinR"></div>
							<div id="ec1"></div>
							<div id="volumeWheelBack"></div>
							<div id="volumeWheel"></div>
							<div id="joystickBack"></div>
							<div id="buttonsABBack"></div>
							<div id="buttonsSSBack"></div>
							<div id="jackBack"></div>
							<div id="jack"></div>
							<div id="ec2"></div>
							<div id="powerBack"></div>
							<div id="power"></div>
							<div id="box"></div>
							<div id="screen"></div>
							<div id="screen2"></div>
							<div id="joystickCross1"></div>
							<div id="joystickCross2"></div>
							<div id="buttonsSS"></div>
							<div id="buttonsSSText"></div>
							<div id="buttonsAB"></div>
							<div id="buttonsABText"></div>
							<div id="powerLed"></div>
							<div id="speakerFilter"></div>
						</div>
						<table id="credits">
							<tr><th>Pr√©sentation</th><td>Lo√Øck <span class="small-caps">Chovet</span>,<br>Eldred <span class="small-caps">Habert</span></td></tr>
							<tr><th>Tuteur</th><td>Alexis <span class="small-caps">Pereda</span></td></tr>
							<tr><th>Responsable ISIMA</th><td>Patrice <span class="small-caps">Lauren√ßot</span></td></tr>
						</table>
					</div>
					<div id="logos">
						<a href="https://isima.fr"><img src="slide_assets/soutenance_zz2/ISIMA.png" alt="ISIMA"></a>
						<a href="https://uca.fr"><img src="slide_assets/soutenance_zz2/UCA.png" alt="UCA"></a>
					</div>
				</section>
				<section>
					<h2>Introduction</h2>
					<p class="fragment">Mode du retro-gaming et retro-dev</p>
					<p class="fragment">Game Boy : favori pour jouer partout...</p>
					<p class="fragment">...mais pas √† distance</p>
					<p class="fragment">Probl√©matique :<br><strong class="fragment">Comment communiquer avec la console ?</strong></p>

					<aside class="notes">
						<p>
							‚òùÔ∏èDans le cadre de la mode du d√©veloppement de jeux r√©tro, et en particulier sur Game Boy‚òùÔ∏è ‚Äî une console particuli√®rement populaire peut-√™tre pour des raisons de nostalgie mais certainement gr√¢ce √† sa portabilit√© ‚Äî nous avons voulu √©tendre les possibilit√©s de la console en concevant un accessoire permettant ‚òùÔ∏èle jeu en ligne.
						</p>
						<p>
							Cette pr√©sentation va se focaliser‚òùÔ∏è sur l'un des aspects les plus int√©ressants de notre projet : ‚òùÔ∏èla communication avec la console.
						</p>
					</aside>
				</section>
				<section>
					<h2 class="no-toc-progress">Plan</h2>
					<ol style="list-style-type: upper-roman;">
						<li class="fragment">
							Bas niveau
							<ol>
								<li class="fragment">Recherche initiale</li>
								<li class="fragment">Impl√©mentation</li>
							</ol>
						</li>
						<li class="fragment">
							Haut niveau
							<ol>
								<li class="fragment">Probl√©matiques</li>
								<li class="fragment">Description</li>
							</ol>
						</li>
					</ol>
					<aside class="notes">
						<p>
							Le d√©roulement global de cette pr√©sentation ira ‚òùÔ∏èdu bas niveau au haut niveau.
						</p>
						<p>
							La partie bas niveau comprendra d'abord un r√©sum√© de l'analyse documentaire que nous avons men√©e, suivi d'explications de l'impl√©mentation qui a √©t√© faite.
						</p>
						<p>
							Celle haut niveau, d'une pr√©sentation du cadre de la conception du protocole, suivi d'un exemple illustr√© d'une des composantes dudit protocole.
						</p>
					</aside>
				</section>

				<section>
					<section data-background-image="slide_assets/soutenance_zz2/Link-Cable2.jpg" data-background-size="contain" data-background-opacity="0.4">
						<h2>C√¢ble Link</h2>

						<aside class="notes">
							Le Game Boy dispose d'un moyen pour communiquer : le c√¢ble Link. Celui-ci permet √† deux Game Boy reli√©s par leur ports Link de communiquer.
						</aside>
					</section>

					<section>
						<h3>Qu'en dit Internet ?</h3>
						<p class="fragment">Communaut√© GBDev</p>
						<p class="fragment">La r√©f√©rence : les <a href="https://gbdev.github.io/pandocs">Pan Docs</a></p>
						<div class="fragment" style="display: flex; justify-content: space-between; align-items: center;">
							<ul>
								<li>Protocole : SPI-like</li>
								<li>Fr√©quence : 8192 Hz</li>
								<li>Horloge au repos : Haut</li>
								<li>Pinout : voir ci-contre</li>
							</ul>
							<img src="slide_assets/soutenance_zz2/gameboi.png" alt="Pinout du port link">
						</div>
						<aside class="notes">
							<p>
								Nous avons d'abord recherch√© des informations sur Internet, afin d'√©viter de r√©p√©ter du travail d√©j√† effectu√©. Nous avons trouv√© la communaut√© GBDev ‚òùÔ∏è, et leur ressource de r√©f√©rence, les "Pan Docs".‚òùÔ∏è
							</p>
							<p>
								‚òùÔ∏èNous y avons trouv√© une description du protocole de communication comme proche du SPI (que nous allons expliquer bient√¥t), la fr√©quence d'horloge de la communication, l'√©tat de l'horloge au repos, ainsi que des sch√©mas de placement des broches sur le port.
							</p>
						</aside>
					</section>
					<section>
						<h3>Le protocole SPI</h3>
						<p class="fragment">Serial Protocol Interface</p>
						<p class="fragment">1 ma√Ætre, plusieurs esclaves</p>
						<p class="fragment">4 fils : <abbr title="Slave CLock">SCL</abbr>, <abbr title="Master Out Slave In">MOSI</abbr>, <abbr title="Master In Slave Out">MISO</abbr>, <abbr title="Chip Select">CS</abbr></p>
						<p class="fragment">Communication full-duplex</p>

						<aside class="notes">
							<p>
								Le <dfn>Serial Protocol Interface</dfn> ‚òùÔ∏è est un protocole de communication tr√®s couramment utilis√© dans l'industrie permettant une communication rapide entre un ma√Ætre et un esclave parmi plusieurs.‚òùÔ∏è
							</p>
							<p>
								4 fils sont impliqu√©s ‚òùÔ∏è: le fil d'horloge Slave CLock, un fil d'envoi du ma√Ætre √† l'esclave (Master Out Slave In), un fil √† sens inverse, et un fil d'activation d'esclave Chip Select.
							</p>
							<p>
								Ainsi, en passant par 2 fils, la communication a simultan√©ment lieu du ma√Ætre vers l'esclave et r√©ciproquement, ce qui porte le nom de full-duplex.‚òùÔ∏è
							</p>
						</aside>
					</section>
					<section>
						<h3>Modes SPI</h3>
						<p class="fragment">Combinaison de 2 bits : <abbr title="Clock POLarity">CPOL</abbr> et <abbr title="Clock PHAse">CPHA</abbr></p>
						<table class="fragment">
							<thead>
								<tr><th></th><th>CPHA=0<br>Front montant</th><th>CPHA=1<br>Front descendant</th></tr>
							</thead>
							<tbody>
								<tr><th>CPOL=0<br>0 au repos</th><td>0</td><td>1</td></tr>
								<tr class="fragment highlight-green"><th>CPOL=1<br>1 au repos</th><td>2</td><td>3</td></tr>
							</tbody>
						</table>
						<aside class="notes">
							<p>
								Le SPI poss√®de 4 modes (de 0 √† 3), obtenus en combinant deux bits.‚òùÔ∏è Un bit donne l'√©tat de l'horloge au repos (Clock POLarity), l'autre √† quel front les donn√©es sont √©chang√©es sur les fils MISO et MOSI.
							</p>
							<p>
								‚òùÔ∏èLes Pan Docs indiquent que la clock est √† l'√©tat haut au repos, nous savons donc que CPOL = 1.
							</p>
						</aside>
					</section>
					<section>
						<h3>√áa se complique</h3>
						<p class="fragment">CPHA ?</p>
						<p class="fragment">O√π est CS ?</p>
						<aside class="notes">
							<p>
								Nous validerons plus loin le rapprochement entre le SPI et le protocole de la Game Boy. √Ä ce stade, il nous manquait cependant deux donn√©es :
							</p>
							<ul>
								<li>Quelle valeur prendre pour CPHA ?</li>‚òùÔ∏è
								<li>O√π est le fil de s√©lection d'esclave ?</li>‚òùÔ∏è
							</ul>
						</aside>
					</section>
				</section>

				<section>
					<section data-background-image="slide_assets/soutenance_zz2/Gamelinkcablecomparison.jpg" data-background-size="contain" data-background-opacity="0.4">
						<h2>Port Link</h2>
						<p>Objectif : <strong class="fragment">Acc√©der aux fils du port</strong></p>
						<p class="fragment">Il nous faut un <strong>breakout</strong>.</p>

						<aside class="notes">
							<p>
								Dans le but de d√©terminer de mani√®re juste le protocole de communication, nous aimerions pouvoir analyser le signal en sortie de port Link.‚òùÔ∏è
								Pour cela il est necessaire d'avoir acc√®s aux diff√©rents fils de ce port, ce qui est la fonction d'un breakout.‚òùÔ∏è
							</p>
						</aside>

					</section>
					<section>
						<h3>Solution<span class="fragment strike" data-fragment-index="1">s</span> existante<span class="fragment strike" data-fragment-index="1">s</span></h3>
						<img class="fragment" src="slide_assets/soutenance_zz2/tindebreakout.jpg" alt="Breakout de Vaguilar, sur Tindie" style="width: 30vw;">
						<p class="fragment">Inconv√©nients : site non &laquo;fiable&raquo;, co√ªt, dur√©e de livraison</p>

						<aside class="notes">
							<p>
								Notre premi√®re id√©e √† √©t√© de chercher les solutions sur internet.
								Dans les fait, une seule existe,‚òùÔ∏è et est propos√©e sur le site Tindies par un amateur.
								‚òùÔ∏èCependant, nous n'avons aucune id√©e de la fiabilit√© du site ainsi que le co√ªt est aussi √©lev√© (13$) pour une si petite carte et la dur√©e de livraison nous ont motiv√© √† trouver d'autres solutions
							</p>
						</aside>

					</section>
					<section>
						<h3>Solution provisoire</h3>
						<img class="fragment" src="slide_assets/soutenance_zz2/breakoutcarton.jpg" alt="Breakout litt√©ralement en carton" style="width: 25vw;">
						<p class="fragment">Inconv√©nient : faible durabilit√©</p>

						<aside class="notes">
							<p>
								Comme nous avions besoin d'analyser rapidement le signal, nous avons d√©but√© par la conception d'un prototype tr√®s simple alliant des fils et une feuille cartonn√© ‚òùÔ∏è.
								Cependant, bien que fonctionnel, ‚òùÔ∏èce dispositif ne dispose que d'une tr√®s faible durabilit√©.
							</p>
						</aside>
					</section>
					<section>
						<h3>Solution d√©finitive</h3>
						<p class="fragment">
							<img src="slide_assets/soutenance_zz2/easyeda.png" alt="Logo Easy EDA" style="float: right; width: 10vw;">
							Carte √©lectronique con√ßue sous Easy EDA
						</p>

						<aside class="notes">
							<p>
								Il nous as ainsi fallu concevoir notre propre carte √©lectronique. Pour cela nous avons utilis√© l'√©diteur en ligne Easy EDA.‚òùÔ∏è
								Il s'agit d'une site de CAO (conception assist√©e par ordinateur) pour le design de carte √©lectroniques qui propose l'enti√®ret√© de la chaine de production.
								En effet, le site propose du design a la mise en production de la carte. Nous n'avons cependant pas utilis√© cette derni√®re fonctionnalit√©, Polytech disposant d'une machine pouvant imprimer ces circuits.
							</p>
						</aside>
					</section>
					<section>
						<h3>Designs interm√©diaires</h3>
						<p class="fragment">Premier concept :</p>
						<img class="fragment" src="slide_assets/soutenance_zz2/breakoutv1.jpg" alt="Premier design imprim√©" style="width: 15vw;">
						<p class="fragment">D√©fauts : pistes trop courtes, trous non traversants</p>
						<aside class="notes">
							<p>
								‚òùÔ∏èLe premier design r√©alis√© √† √©t√© le suivant.‚òùÔ∏è Cependant nous n'avions pas pris une donn√©e en compte, en effet, la machine de Polytech ne peut pas effectuer de trous traversant.‚òùÔ∏è
								Ainsi, seuls trois fils √©taient accessibles. Aussi les piste permettant de se connecter avec le port √©taient trop petites.
							</p>
						</aside>
					</section>
					<section>
						<h3>Design final</h3>
						<div style="display: flex; justify-content: center; align-items: center; height: 40vh;">
							<img src="slide_assets/soutenance_zz2/breakoutfinalplan.png" alt="Rendu final design" style="margin: 1%;">

							<aside class="notes">
								<p>
									Pour le design final, nous avons utilis√© la solution suivante ‚òùÔ∏èpermettant de faire revenir les piste du dessous au dessus. Le breakout suivant nous permettra donc d'analyser efficacement le signal
								</p>
							</aside>
						</div>
					</section>
				</section>

				<section>
					<section>
						<h2>Analyse</h2>
						<aside class="notes">
							<p>
								Nous allons d√©sormais chercher a confirmer nos informations et √† √©tablir la m√©thode de communication du Game Boy.
							</p>
						</aside>
					</section>
					<section>
						<h3>Le Logic Analyzer</h3>
						<img src="slide_assets/soutenance_zz2/logicportanal.png" alt="Logic Port Analyser" style="width: 20vw;">
						<p class="fragment">Mat√©riel + logiciel permettant lecture et interpr√©tation de trames</p>

						<aside class="notes">
							<p>
								Pour cela, un outils que nous utiliserons √† mainte reprise est le Logic Port Analyser‚òùÔ∏è. Il s'agit d'un ensemble mat√©riel et logiciel permettant la lecture et l'interpr√©tations de signaux.
								En effet, il suffit de brancher les fils √† √©tudier au logic port analyser pour les apercevoir dans l'interface du logiciel.
								On peut ainsi dans ce dernier cr√©er des interpr√©teurs bas√©s sur des protocoles connus dont, ce qui va nous int√©resser : Le SPI.
							</p>
						</aside>

					</section>
					<section>
						<h3>R√©sultats exp√©rimentaux</h3>
						<p>On trouve bien ce que l'on veut avec l'analyseur suivant :</p>
						<img src="slide_assets/soutenance_zz2/Capture3.png" alt="Interpr√©teur SPI" style="width: 20vw;">

						<aside class="notes">
							<p>
								Apr√®s quelques recherches empiriques nous avons r√©ussi a trouver le bon ensemble permettant la lecture des trames. Il faut donc l'interpr√©teur suivant.
								Un spi en mode 3. On pourra ainsi s'en servir dans le futur, pour verifier notre signal.
							</p>
						</aside>
					</section>
				</section>

				<section>
					<section>
						<h2>Impl√©mentation</h2>
					</section>
					<section>
						<h3>Les cartes Utilis√©es : </h3>
						<p class="fragment">
							Lectures de trames SPI et prototypage : Nucleo F303K8 <img src="slide_assets/soutenance_zz2/nucleo_f303k8.png" alt="Nucleo F303K8" style="width: 20vw; ">
						</p>

						<aside class="notes">
							<p>
								Nous avons, dans un premier temps, utilis√© la carte Nucleo F303K8.‚òùÔ∏è Cette derni√®re, d√©j√† disponible √† l'Isima disposait de performances suffisantes pour effectuer ce que l'on voulait.
								Cependant elle manquait d'un port Ethernet
							</p>
						</aside>
					</section>
					<section>
						<h3>Les cartes Utilis√©es : </h3>
						<p >
							Prototype final : Nucleo F746ZG

						</p>
						<img src="slide_assets/soutenance_zz2/nucleo_f746zg.jpg" alt="Nucleo F746ZG" style="width: 20vw;">
						<aside class="notes">
							<p>
								Et c'est pour cela que nous sommes ensuite pass√© √† la carte suivante. En effet celle-ci est l'une des rares de la game √† proposer un port Ethernet, ce qui allais donc nous permettre de relier nos diff√©rents travaux.

							</p>
						</aside>
					</section>
					<section>
						<h3>Le protocole SPI sur Nucleo</h3>
						<p>Composants et Biblioth√®ques adapt√©es en langage c++</p>
						<p class="fragment">Master (Objet SPI) ou Slave (Objet SPISlave) ?</p>
						<pre class="fragment"><code class="highlight lang-c++">SPISlave device(MOSI, MISO, SCL, CS);</code></pre></p>
						<p class="fragment">Plus simple d'√™tre esclave, Carte bien plus rapide que le Gameboy qui le suit donc facilement.</p>
						<aside class="notes">
							L'avantage de ces cartes est qu'elles disposent de composants destin√©s aux traitements du protocole SPI.
							Ainsi le langage utilis√© sera le c++ adjoint √† des biblioth√®ques li√©es a la carte.
							Cependant, il existe 2 objets correspondants a nos besoins : SPI et SPISlave ‚òùÔ∏è, indiquant si notre objet est ma√Ætre ou esclave.
							Il nous revenait donc de faire le choix, le Gameboy d√©cidant par lui m√™me. Il nous a donc sembl√© plus simple de se placer en Slave,‚òùÔ∏è en effet la carte √©tant bien plus rapide que le Gameboy, il est donc plus simple de suivre son rythme de cette mani√®re.‚òùÔ∏è
						</aside>
					</section>
					<section>
						<h3>s'adapter au Simili SPI du Gameboy</h3>
						<p>Quel Pin mettre en Chip Select ? </p>
						<pre class="fragment"><code class="highlight lang-c++">SPISlave device(MOSI, MISO, SCL, NC);</code></pre>
						<p>Comment bien interpr√©ter ?</p>
						<pre class="fragment"><code class="highlight lang-c++">
device.format(8,3); // nombre de bits par paquet et mode de spi
device.frequency(8192);
						</code></pre>

						<aside class="notes">
							Ainsi, Il faut permettre √† notre objet de classe SPISlave de se connecter au Gameboy.
							Pour cela, on aimerait premi√®rement trouver comment pallier au manque de fil Chip Select sur le Game Boy.
							Et bien, Mbed, la plateforme de code, propose d'affecter CS √† la pin NC, qui ne correspond a aucune pin.‚òùÔ∏è
							Aussi, on aimerait affecter les bons param√®tres √† ce SPI, c'est √† dire la fr√©quence et le mode.
							Pour cela il suffit d'utiliser les m√©thodes suivantes.‚òùÔ∏è
						</aside>
					</section>
					<section>
						<h3>Communication avec le Game Boy</h3>
						Deux m√©thodes : reply() remplis le buffer de r√©ponse, read() retourne la valeur re√ßu et envoie le contenu du buffer de r√©ponse.

						<aside class="notes">
							Le protocole SPI de la Nucleo est bas√©e sur 2 buffers, un d'entr√©e et un de r√©ponse.
							de plus l'objet SPISlave dispose de 2 m√©thodes importantes :
							‚òùÔ∏è
							Reply qui remplis le buffer de r√©ponse et read qui retourne le contenu du buffer d'entr√©e et envoie le contenu du buffer de r√©ponse.
							Il faudra donc prendre en compte le fait que la r√©ponse de la Nucl√©o viendra toujours au prochain message du Gameboy
						</aside>
					</section>


				</section>

				<section>
					<section>
						<h2>Conception</h2>
						<aside class="notes">
							<p>
								Ceci conclut la partie physique de la communication. Nous devions ensuite concevoir le reste du protocole de communication de Game Boy √† Game Boy.
							</p>
							<p>
								Cette communication a globalement lieu en deux parties : la Game Boy parle √† l'adaptateur, et les adaptateurs se parlent entre eux. Nous avons d√©cid√© de concevoir la partie Game Boy en premier, puisque ce serait les fonctionnalit√©s offertes √† l'utilisateur final ; la communication inter-adaptateur serait ensuite con√ßue en fonction des services √† fournir. (Des fonctionnalit√©s pourraient √™tre retir√©es si leur impl√©mentation s'av√©rait trop difficile.)
							</p>
						</aside>
					</section>
					<section>
						<h3 style="display: none;">Couches r√©seau</h3>
						<table>
							<thead>
								<tr><th>Num√©ro</th><th>Description</th><th>Impl√©mentation</th></tr>
							</thead>
							<tbody>
								<tr><th>7</th><td>Application</td><td rowspan="4" class="fragment" data-fragment-index="4">Programme</td></tr>
								<tr><th>6</th><td>Pr√©sentation</td></tr>
								<tr><th>5</th><td>Session</td></tr>
								<tr><th>4</th><td>Transport</td></tr>
								<tr><th>3</th><td>R√©seau</td><td class="fragment" data-fragment-index="3">N/A</td></tr>
								<tr><th>2</th><td>Liaison de donn√©es</td><td class="fragment" data-fragment-index="2">Adaptateur</td></tr>
								<tr><th>1</th><td>Physique</td><td class="fragment" data-fragment-index="1">C√¢ble Link</td></tr>
							</tbody>
						</table>
						<aside class="notes">
							<p>
								Commen√ßons par une vue d'ensemble : comment les diff√©rentes couches de communication sont r√©parties. Nous venons de voir la partie physique‚òùÔ∏è, reste d√©j√† √† d√©finir le cadre de notre adaptateur.
							</p>
							<p>
								√âtant donn√© qu'il s'assure de la communication sur un m√™me r√©seau mais pas plus (comme nous sommes bas√©s sur de l'Ethernet), nous l'avons assimil√© √† un √©quipement de couche 2.‚òùÔ∏è
							</p>
							<p>
								La r√©partition des niveaux sup√©rieurs est simple : il n'y a pas de niveau 3‚òùÔ∏è puisque nous n'assurons pas de communication inter-r√©seaux, et le reste‚òùÔ∏è sera laiss√© √† nos utilisateurs.
							</p>
						</aside>
					</section>
					<section>
						<h3>Objectifs</h3>
						<ul>
							<li class="fragment">Fiabilit√©</li>
							<li class="fragment">Rapidit√©</li>
							<li class="fragment">L√©g√®ret√©</li>
						</ul>
						<aside class="notes">
							<p>
								Afin de concevoir un protocole adapt√© √† notre cas d'utilisation, nous avons recherch√© sur quels aspects nous focaliser en priorit√©. ‚òùÔ∏èLa fiabilit√© nous est imm√©diatement venue √† l'esprit, puisque les jeux multijoueur veulent que tous les joueurs restent synchronis√©s.
							</p>
							<p>
								La plupart des jeux multijoueurs de la console (Tetris, pour ne citer que le plus vendu) sont en temps r√©el ; nous chercherons donc √† minimiser l'input lag, ‚òùÔ∏èqui est la latence entre l'appui sur un bouton et l'ex√©cution de son action.
							</p>
							<p>
								Nous avons ensuite pens√© au fait que la Game Boy √©tait une machine peu rapide, ‚òùÔ∏èet qu'il serait donc int√©ressant que le protocole requi√®re peu de calculs suppl√©mentaires de sa part.
							</p>
						</aside>
					</section>
				</section>

				<section>
					<section>
						<h2>Protocole</h2>
					</section>
					<section>
						<h3>Principe</h3>
						<ol>
							<li class="fragment">Envoi d'une commande</li>
							<li class="fragment">Envoi d'un argument</li>
							<li class="fragment">R√©ponse</li>
						</ol>
						<aside class="notes">
							<p>
								Nous avons d√©cid√© que le premier octet envoy√© par la console serait une commande‚òùÔ∏è ; la liste des commandes pourrait √™tre d√©finie plus tard, ceci nous semblait assez flexible.
							</p>
							<p>
								Le deuxi√®me octet serait l'argument de l'instruction‚òùÔ∏è : en effet, l'envoi par exemple de donn√©es pourrait difficilement √™tre encod√© dans l'octet de commande, ou alors cela restreindrait fortement l'ensemble des commandes. De plus, cela demanderait des manipulations suppl√©mentaires du c√¥t√© de la console.
							</p>
							<p>
								Enfin, le troisi√®me octet serait un retour de la Nucl√©o‚òùÔ∏è. Ceci serait utile pour des commandes de questionnement (ex : combien de consoles actuellement connect√©es ?), mais aussi comme code retour ("impossible d'envoyer, pas de connexion").
							</p>
						</aside>
					</section>
					<section>
						<h3>S√©curit√©s</h3>
						<p>
							<strong>Supposition</strong> : tous les c√¢bles sont connect√©s ou non <strong>ensemble</strong>.
						</p>
						<img class="fragment" src="slide_assets/soutenance_zz2/exemple_signal.png" alt="Exemple de signal">
						<aside class="notes">
							<p>
								Nous avons fait une supposition dans la conception du protocole‚òùÔ∏è : que tous les fils du c√¢ble Link sont soit tous connect√©s, soit tous d√©connect√©s.
							</p>
							<p>
								Ceci semble plut√¥t r√©aliste si l'on met de c√¥t√© les faux contacts, et si nous partons du principe que tous les signaux peuvent √™tre ind√©pendamment d√©connect√©s, nous ne pouvons aller nulle part.
							</p>
							<p>
								Voici donc ce √† quoi nous avons pens√©‚òùÔ∏è : ceci sch√©matise le transfert d'un octet du Game Boy √† la Nucl√©o. Sp√©cifiquement, le signal d'en bas est l'horloge re√ßue par la Nucl√©o, et en haut sa r√©ponse.
							</p>
							<p>
								D√®s qu'un signal d'horloge est re√ßu, la Nucl√©o passe √† l'√©tat logique 0, et le maintient pour une dur√©e de 15 demi-p√©riodes. Le Game Boy devrait donc recevoir l'octet "1000 0000".
							</p>
						</aside>
					</section>
					<section>
						<h3>Algorithme</h3>
						<ol>
							<li class="fragment">Envoyer l'octet</li>
							<li class="fragment">0x80 re√ßu ? (Non ‚áí recommencer)</li>
						</ol>
						<img class="fragment" src="slide_assets/soutenance_zz2/exemple_corruption.png" alt="Exemple de signal corrompu">
						<aside class="notes">
							<p>
								Du c√¥t√© Game Boy, l'algorithme de transmission serait le suivant : ‚òùÔ∏èd'abord, transmettre l'octet ; ensuite, examiner l'octet de r√©ponse.‚òùÔ∏è S'il vaut bien 0x80, le transfert a eu lieu avec succ√®s. Sinon, recommencer.
							</p>
							<p>
								Si le c√¢ble s'est d√©connect√© pendant une fraction de la transaction, tous les signaux passent √† l'√©tat "1" √† cause des r√©sistances de pull-up. Donc, tout bit que le Game Boy ne re√ßoit pas est remplac√© par un 1. Ceci prot√®ge le transfert de tous les bits sauf le premier.
							</p>
							<p>
								Le premier bit est n√©anmoins prot√©g√©, car il sert de d√©but √† la transaction ‚Äî s'il n'est pas re√ßu par la Nucl√©o, le bit suivant sera un 1 et non un 0, on ne recevra donc pas 0x80.
							</p>
							<p>
								La Nucl√©o, elle, peut v√©rifier que la cadence de l'horloge est correcte, et rejeter l'octet re√ßu si ce n'est pas le cas.
							</p>
						</aside>
					</section>
					<section>
						<h3>Bilan</h3>
						<ul style="list-style-type: 'üëç';">
							<li class="fragment">R√©aliste</li>
							<li class="fragment">Minimaliste</li>
						</ul>
						<ul style="list-style-type: 'üëé';">
							<li class="fragment">Bit √† bit</li>
							<li class="fragment">Non test√©</li>
						</ul>
						<aside class="notes">
							<p>
								Ce protocole prend en compte des cas d'usage r√©alistes‚òùÔ∏è et poss√®de une sp√©cification simple, donc raisonnable √† impl√©menter. Il est en outre‚òùÔ∏è l√©ger en impl√©mentation, respectant ainsi les crit√®res de rapidit√© et de l√©g√®ret√© pos√©s plus haut.
							</p>
							<p>
								Il y a deux inconv√©nients √† la sp√©cification que nous avons propos√©e : ‚òùÔ∏èd'une part, elle traite les bits un √† un, ce qui est peu compatible avec le protocole SPI, qui travaille lui plus octet par octet. Nous pensons qu'une retouche pour travailler octet par octet serait possible, mais ‚òùÔ∏è √† cause de probl√®mes techniques nous n'avons pas pu √©prouver ni approfondir notre travail.
							</p>
						</aside>
					</section>
				</section>

				<section>
					<h2>Conclusion</h2>
					<p class="fragment">Succ√®s de conception</p>
					<p class="fragment">R√©utilisation de travail pr√©c√©dent<span class="fragment"><br>(dans certaines limites)</span></p>
					<p class="fragment">Pas d'impl√©mentation : <span class="fragment strike">livrable</span>, <span class="fragment strike">retours</span></p>
					<p class="fragment">Bonne base pour la suite</p>
					<aside class="notes">
						<p>
							‚òùÔ∏èNous avons pu concevoir, de bout en bout, un protocole de communication entre un programme tournant sur Game Boy et un accessoire con√ßu par nos soins.
						</p>
						<p>
							‚òùÔ∏èNous avons pu valoriser le travail effectu√© par d'autres avant nous sur la partie bas niveau, mais avons √©t√© plus limit√©s sur la partie plus haut niveau.
						</p>
						<p>
							‚òùÔ∏èIl ne nous a pas √©t√© possible de mener l'impl√©mentation √† son terme, ce qui cause ‚òùÔ∏èl'absence d'un livrable tel que nous nous y attendions au d√©but du projet, et ‚òùÔ∏ènous a emp√™ch√©s de profiter de retours d'exp√©rience sur notre travail.
						</p>
						<p>
							‚òùÔ∏èNous esp√©rons n√©anmoins que notre travail pourra √™tre utile √† d'autres projets ult√©rieurs.
						</p>
					</aside>
				</section>

				<section>
					<h2>Remerciements</h2>
					<ul>
						<li><a href="https://gbdev.github.io">La communaut√© GBDev</a> pour leur travail de recherche et de documentation ;</li>
						<li>Heero, pour <a href="https://codepen.io/heero/pen/wylhv">l'animation</a> (retouch√©e) sur la couverture ;</li>
						<li>Vous, pour votre attention !</li>
					</ul>
					<p>Toute question peut √™tre soumise √† l'adresse <a href="mailto:me@eldred.fr">me@eldred.fr</a>.</p>
				</section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
                    { src: 'plugin/toc-progress/toc-progress.js', async: true, callback: function() { toc_progress.initialize('scroll', '#333'); toc_progress.create(); } },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true }
				]
			});
		</script>
	</body>
</html>
