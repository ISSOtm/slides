<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Soutenance projet ZZ2</title>

		<base href="../" />

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<link rel="stylesheet" href="slide_assets/soutenance_zz2/gameboy.css">

		<style type="text/css">
			.small-caps { font-variant-caps: small-caps; }

			.reveal thead > tr > th { vertical-align: bottom; text-align: center; }
			.reveal tbody > tr > td, tbody > tr > th { vertical-align: middle; }
			.reveal tbody > tr > th { text-align: right; }
			.reveal tbody > tr > td { text-align: center; }

			#credits { font-size: 0.7em; }
			#credits td, #credits th { border: none; vertical-align: middle; }
			#credits th { text-align: right; font-variant-caps: small-caps; }
			#credits td { text-align: left; }

			#logos { height: 5vh; }
			#logos > a > img {
				float: right;
				margin-left: 5%;
				height: 100%;

				border-radius: 6px;
			}
			#logos > a > img:not(:hover) {
				border-color: #0000;
				background-color: initial;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1 class="no-toc-progress" style="font-size: 1.5em;">
						<small>Soutenance projet 2<sup>ème</sup> année</small><br>
						Adaptateur Ethernet pour Game Boy™
					</h1>
					<div>
						<div id="gameboy" style="float: left;">
							<div id="back"></div>
							<div id="border"></div>
							<div id="card3"></div>
							<div id="card2"></div>
							<div id="chip2"></div>
							<div id="screenBack"></div>
							<div id="card1"></div>
							<div id="speaker"></div>
							<div id="chip"></div>
							<div id="chipPinL"></div>
							<div id="chipPinR"></div>
							<div id="ec1"></div>
							<div id="volumeWheelBack"></div>
							<div id="volumeWheel"></div>
							<div id="joystickBack"></div>
							<div id="buttonsABBack"></div>
							<div id="buttonsSSBack"></div>
							<div id="jackBack"></div>
							<div id="jack"></div>
							<div id="ec2"></div>
							<div id="powerBack"></div>
							<div id="power"></div>
							<div id="box"></div>
							<div id="screen"></div>
							<div id="screen2"></div>
							<div id="joystickCross1"></div>
							<div id="joystickCross2"></div>
							<div id="buttonsSS"></div>
							<div id="buttonsSSText"></div>
							<div id="buttonsAB"></div>
							<div id="buttonsABText"></div>
							<div id="powerLed"></div>
							<div id="speakerFilter"></div>
						</div>
						<table id="credits">
							<tr><th>Présentation</th><td>Loïck <span class="small-caps">Chovet</span>,<br>Eldred <span class="small-caps">Habert</span></td></tr>
							<tr><th>Tuteur</th><td>Alexis <span class="small-caps">Pereda</span></td></tr>
							<tr><th>Responsable ISIMA</th><td>Patrice <span class="small-caps">Laurençot</span></td></tr>
						</table>
					</div>
					<div id="logos">
						<a href="https://isima.fr"><img src="slide_assets/soutenance_zz2/ISIMA.png" alt="ISIMA"></a>
						<a href="https://uca.fr"><img src="slide_assets/soutenance_zz2/UCA.png" alt="UCA"></a>
					</div>
				</section>

				<section>
					<section data-background-image="slide_assets/soutenance_zz2/Link-Cable2.jpg" data-background-size="contain" data-background-opacity="0.4">
						<h2>Le Câble Link</h2>

						<aside class="notes">
							Pour blabla
						</aside>
					</section>

					<section>
						<h3>Qu'en dit Internet ?</h3>
						<p class="fragment">Communauté GBDev</p>
						<p class="fragment">La référence : les <a href="https://gbdev.github.io/pandocs">Pan Docs</a></p>
						<div class="fragment" style="display: flex; justify-content: space-between; align-items: center;">
							<ul>
								<li>Protocole : SPI-like</li>
								<li>Fréquence : 8192 Hz</li>
								<li>Horloge au repos : Haut</li>
								<li>Pinout : voir ci-contre</li>
							</ul>
							<img src="slide_assets/soutenance_zz2/gameboi.png" alt="Pinout du port link">
						</div>
						<aside class="notes">
							<p>
								Nous avons d'abord recherché des informations sur Internet, afin d'éviter de répéter du travail déjà effectué. Nous avons trouvé la communauté GBDev, et leur ressource de référence, les "Pan Docs".
							</p>
							<p>
								Nous y avons trouvé une description du protocole de communication comme proche du SPI (que nous allons expliquer bientôt), la fréquence d'horloge de la communication, l'état de l'horloge au repos, ainsi que des schémas de placement des broches sur le port.
							</p>
						</aside>
					</section>
					<section>
						<h3>Le protocole SPI</h3>
						<p class="fragment">Serial Protocol Interface</p>
						<p class="fragment">1 maître, plusieurs esclaves</p>
						<p class="fragment">4 fils : <abbr title="Slave CLock">SCL</abbr>, <abbr title="Master Out Slave In">MOSI</abbr>, <abbr title="Master In Slave Out">MISO</abbr>, <abbr title="Chip Select">CS</abbr></p>
						<p class="fragment">Communication full-duplex</p>

						<aside class="notes">
							<p>
								Le <dfn>Serial Protocol Interface</dfn> est un protocole de communication très couramment utilisé dans l'industrie permettant une communication rapide entre un maître et un esclave parmis plusieurs.
							</p>
							<p>
								4 fils sont impliqués : le fil d'horloge Slave CLock, un fil d'envoi du maître à l'esclave (Master Out Slave In), un fil à sens inverse, et un fil d'activation d'esclave Chip Select.
							</p>
							<p>
								Ainsi, en passant par 2 fils, la communication a simultanément lieu du maître vers l'esclave et réciproquement, ce qui porte le nom de full-duplex.
							</p>
						</aside>
					</section>
					<section>
						<h3>Modes SPI</h3>
						<p class="fragment">Combinaison de 2 bits : <abbr title="Clock POLarity">CPOL</abbr> et <abbr title="Clock PHAse">CPHA</abbr></p>
						<table class="fragment">
							<thead>
								<tr><th></th><th>CPHA=0<br>Front montant</th><th>CPHA=1<br>Front descendant</th></tr>
							</thead>
							<tbody>
								<tr><th>CPOL=0<br>0 au repos</th><td>0</td><td>1</td></tr>
								<tr class="fragment highlight-green"><th>CPOL=1<br>1 au repos</th><td>2</td><td>3</td></tr>
							</tbody>
						</table>
						<aside class="notes">
							<p>
								Le SPI possède 4 modes (de 0 à 3), obtenus en combinant deux bits. Un bit donne l'état de l'horloge au repos (Clock POLarity), l'autre à quel front les données sont échangées sur les fils MISO et MOSI.
							</p>
							<p>
								Les Pan Docs indiquent que la clock est à l'état haut au repos, nous savons donc que CPOL = 1.
							</p>
						</aside>
					</section>
					<section>
						<h3>Ça se complique</h3>
						<p class="fragment">CPHA ?</p>
						<p class="fragment">Où est CS ?</p>
						<aside class="notes">
							<p>
								Nous validerons plus loin le rapprochement entre le SPI et le protocole de la Game Boy. À ce stade, il nous manquait cependant deux données :
							</p>
							<ul>
								<li>Quelle valeur prendre pour CPHA ?</li>
								<li>Où est le fil de sélection d'esclave ?</li>
							</ul>
						</aside>
					</section>
				</section>

				<section>
					<section data-background-image="slide_assets/soutenance_zz2/Gamelinkcablecomparison.jpg" data-background-size="contain" data-background-opacity="0.4">
						<h2>Utilisation du port</h2>
						<p>Objectif : <strong class="fragment">Accéder aux fils du port</strong></p>
						<p class="fragment">Il nous faut un <strong>breakout</strong>.</p>

						<aside class="notes">
							<p>
								Dans le but de déterminer de manière juste le protocole de communication, nous aimerions pouvoir analyser le signal en sortie de port Link.
								Pour cela il est necessaire d'avoir accès aux différents fils de ce port, ce qui est la fonction d'un breakout.
							</p>

					</section>
					<section>
						<h3>Solution<span class="fragment strike" data-fragment-index="1">s</span> existante<span class="fragment strike" data-fragment-index="1">s</span></h3>
						<img class="fragment" src="slide_assets/soutenance_zz2/tindebreakout.jpg" alt="Breakout de Vaguilar, sur Tindie" style="width: 30vw;">
						<p class="fragment">Inconvénients : site non &laquo;fiable&raquo;, coût, durée de livraison</p>

						<aside class="notes">
							<p>
								Notre première idée à été de chercher les solutions sur internet. 
								Dans les fait, une seule existe, et est proposée sur le site Tindies par un amateur.
								Cependant, nous n'avons aucune idée de la fiabilité du site ainsi que le coût est aussi élevé (13$) pour une si petite carte et la durée de livraison nous ont motivé a trouver d'autres solutions
							</p>
						</aside>

					</section>
					<section>
						<h3>Solution provisoire</h3>
						<img class="fragment" src="slide_assets/soutenance_zz2/breakoutcarton.jpg" alt="Breakout littéralement en carton" style="width: 25vw;">
						<p class="fragment">Inconvénient : faible durabilité</p>

						<aside class="notes">
							<p>
								Comme nous avions besoin d'analyser rapidement le signal, nous avons débuter par la conception d'un prototype très simple alliant des fils et une feuille cartonée.
								Cependant, bien que fonctionnel, ce dispositif ne dispose que d'une très faible durabilitée.
							</p>
						</aside>
					</section>
					<section>
						<h3>Solution définitive</h3>
						<p class="fragment">
							<img src="slide_assets/soutenance_zz2/easyeda.png" alt="Logo Easy EDA" style="float: right; width: 10vw;">
							Carte électronique conçue sous Easy EDA
						</p>

						<aside class="notes">
							<p>
								Il nous as ainsi fallu concevoir notre propre carte électronique. Pour cela nous avons utilisé l'éditeur en ligne Easy EDA.
								Il s'agit d'une site de CAO (conception assistée par ordinateur) pour le design de carte électroniques qui propose l'entièretée de la chaine de production.
								En effet, le site propose du design a la mise en production de la carte. Nous n'avons cependant pas utilisé cette derniere fonctionnalitée, Polytech disposant d'une machine pouvant imprimer ces circuits.
							</p>
						</aside>
					</section>
					<section>
						<h3>Designs intermédiaires</h3>
						<p class="fragment">Premier concept :</p>
						<img class="fragment" src="slide_assets/soutenance_zz2/breakoutv1.jpg" alt="Premier design imprimé" style="width: 15vw;">
						<p class="fragment">Défauts : pistes trop courtes, trous non traversants</p>
						<aside class="notes">
							<p>
								Le premier design réalisé à été le suivant. Cepandant nous n'avions pas pris une donnée en compte, en effet, la machine de Polytech ne peut pas effectuer de trous traversant.
								Ainsi, seuls trois fils etaient accessibles. Aussi les piste permettant de se connecter avec le port étaient trop petites.
							</p>
						</aside>
					</section>
					<section>
						<h3>Design final</h3>
						<div style="display: flex; justify-content: center; align-items: center; height: 40vh;">
							<img src="slide_assets/soutenance_zz2/breakoutfinalplan.png" alt="Rendu final design" style="margin: 1%;">
							<img src="slide_assets/soutenance_zz2/breakoutfinalphoto.png" alt="Rendu final réel" style="margin: 1%;">
							<aside class="notes">
								<p>
									Pour le design final, nous avons utilisé la solution suivante permettant de faire revenir les piste du dessous au dessus. Le breakout suivant nous permettra donc d'analyser efficacement le signal
								</p>
							</aside>
						</div>
					</section>
				</section>

				<section>
					<section>
						<h2>Mode de communication</h2>
						<aside class="notes">
							<p>
								Nous allons désormais chercher a confirmer nos informations et à établir la méthode de communication du Gameboy.
							</p>
						</aside>
					</section>
					<section>
						<h3>Le Logic Analyzer</h3>
						<img src="slide_assets/soutenance_zz2/logicportanal.png" alt="Logic Port Analyser" style="width: 20vw;">
						<p class="fragment">Matériel + logiciel permettant lecture et interprétation de trames</p>

						<aside class="notes">
							<p>
								Pour cela, un outils que nous utiliserons à mainte reprise est le Logic Port Analyser. Il s'agit d'un ensemble matériel et logiciel permettant la lecture et l'interpretations de signaux.
								En effet, il suffit de brancher les fils à étudier au logic port analyser pour les apercevoir dans l'interface du logiciel.
								On peut ainsi dans ce dernier creer des interpreteurs basés sur des protocoles connus dont, ce qui va nous interesser : Le SPI.
							</p>
						</aside>

					</section>
					<section>
						<h3>Résultats experimentaux</h3>
						<p>On trouve bien ce que l'on veut avec l'analyseur suivant :</p>
						<img src="slide_assets/soutenance_zz2/Capture3.png" alt="Interpréteur SPI" style="width: 20vw;">

						<aside class="notes">
							<p>
								Après quelques recherches empyriques nous avons réussi a trouver le bon ensemble permettant la lecture des trames. Il faut donc l'interpreteur suivant.
								Un spi en mode 3. On pourra ainsi s'en servir dans le futur, pour verifier notre signal.
							</p>
						</aside>
					</section>
				</section>

				<section>
					<section>
						Intégration du protocole dans la carte embarquée
					</section>
					<section>

					</section>
				</section>

				<section>
					<h2>Remerciements</h2>
					<ul>
						<li><a href="https://gbdev.github.io">La communauté GBDev</a> pour leur travail de recherche et de documentation ;</li>
						<li>Heero, pour <a href="https://codepen.io/heero/pen/wylhv">l'animation</a> (retouchée) sur la couverture ;</li>
						<li>Vous, pour votre attention !</li>
					</ul>
					<p>Toute question peut être soumise à l'adresse <a href="mailto:me@eldred.fr">me@eldred.fr</a>.</p>
				</section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
                    { src: 'plugin/toc-progress/toc-progress.js', async: true, callback: function() { toc_progress.initialize('scroll', '#333'); toc_progress.create(); } },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true }
				]
			});
		</script>
	</body>
</html>
